(function(){function E(n){(function(a){function n(){a("object.cgmp-json-string-placeholder").each(function(m,d){var p=a(d).attr("id"),p=a(d).find("param#json-string-"+p).val(),p=w.searchReplace(p,"'",""),p=p.replace("&quot;",""),b=F(p);if("undefined"===typeof b||!b)return h.fatal("We did not parse JSON from OBJECT param. Aborting map generation .."),!1;if(0<a("div#"+b.id).length){var r=new google.maps.Map(document.getElementById(b.id));x.initMap(r,b.bubbleautopan,parseInt(b.zoom),b.maptype);y.init(r);
    p=new E;p.init(r,b.bubbleautopan,b.distanceunits);p.setGeoLocationIfEnabled(b.enablegeolocationmarker);x.setMapControls({mapTypeControl:"true"===b.maptypecontrol,panControl:"true"===b.pancontrol,zoomControl:"true"===b.zoomcontrol,scaleControl:"true"===b.scalecontrol,scrollwheel:"true"===b.scrollwheelcontrol,streetViewControl:"true"===b.streetviewcontrol,tilt:"true"===b.tiltfourtyfive?45:null,draggable:"true"===b.draggable,overviewMapControl:!0,overviewMapControlOptions:{opened:!1}});"true"===b.showpanoramio&&
    y.buildPanoramioLayer(b.panoramiouid);"true"===b.showbike&&y.buildBikeLayer();"true"===b.showtraffic&&y.buildTrafficLayer();null!=b.kml&&""!=w.trim(b.kml)?y.buildKmlLayer(b.kml):(null!=b.markerlist&&""!=w.trim(b.markerlist)&&p.buildAddressMarkers(b.markerlist,b.addmarkermashup,b.addmarkermashupbubble),p.isBuildAddressMarkersCalled()||J.alertError(f.errors.msgMissingMarkers));a(document).ready(function(){function d(){null!=m&&clearTimeout(m);a(n).is(":hidden")?m=setTimeout(d,p):setTimeout(function(){f(r)},
        p)}function f(a){if(a){var b=a.getZoom(),d=a.getBounds(),m=a.getCenter();google.maps.event.trigger(a,"resize");a.setZoom(b);a.setCenter(m);a.getBounds(d)}}var m=null,p=500,n="div#"+b.id;a(n).is(":hidden")?(h.warn("Map placeholder DIV is hidden, must resize the map!"),d()):setTimeout(function(){f(r)},p)})}else h.fatal("It looks like the map DIV placeholder ID ["+b.id+"] does not exist in the page!")})}var F=function(a){},u=parseFloat(a.fn.jquery.split(".")[0]),v=parseFloat(a.fn.jquery.split(".")[1]);
    1<=u&&2>u&&4<=v?F=a.parseJSON:window.JSON&&window.JSON.parse?F=window.JSON.parse:h.fatal("Using parseJson stub..");var f={},x=function(){var a={};return{initMap:function(d,f,b,r){a=d;d=[];for(var h in google.maps.MapTypeId)d.push(google.maps.MapTypeId[h]);"OSM"==r?(d.push(r),a.mapTypes.set(r,new google.maps.ImageMapType({getTileUrl:function(a,b){return"http://tile.openstreetmap.org/"+b+"/"+a.x+"/"+a.y+".png"},tileSize:new google.maps.Size(256,256),name:"OpenStreet",maxZoom:20}))):"ROADMAP"==r?r=google.maps.MapTypeId.ROADMAP:
        "SATELLITE"==r?r=google.maps.MapTypeId.SATELLITE:"HYBRID"==r?r=google.maps.MapTypeId.HYBRID:"TERRAIN"==r&&(r=google.maps.MapTypeId.TERRAIN);a.setOptions({zoom:b,mapTypeId:r,mapTypeControlOptions:{mapTypeIds:d}})},setMapControls:function(d){a.setOptions(d)}}}(),y=function(){var a={};return{init:function(d){a=d},buildKmlLayer:function(d){if(0>d.toLowerCase().indexOf("http"))return h.error("KML URL must start with HTTP(S). Aborting.."),!1;var p=new google.maps.KmlLayer(d);google.maps.event.addListener(p,
        "status_changed",function(){var a=p.getStatus();if(a!=google.maps.KmlLayerStatus.OK){var d="";switch(a){case google.maps.KmlLayerStatus.DOCUMENT_NOT_FOUND:d=f.errors.kmlNotFound;break;case google.maps.KmlLayerStatus.DOCUMENT_TOO_LARGE:d=f.errors.kmlTooLarge;break;case google.maps.KmlLayerStatus.FETCH_ERROR:d=f.errors.kmlFetchError;break;case google.maps.KmlLayerStatus.INVALID_DOCUMENT:d=f.errors.kmlDocInvalid;break;case google.maps.KmlLayerStatus.INVALID_REQUEST:d=f.errors.kmlRequestInvalid;break;
            case google.maps.KmlLayerStatus.LIMITS_EXCEEDED:d=f.errors.kmlLimits;break;case google.maps.KmlLayerStatus.TIMED_OUT:d=f.errors.kmlTimedOut;break;case google.maps.KmlLayerStatus.UNKNOWN:d=f.errors.kmlUnknown}if(""!=d){var m=f.errors.kml.replace("[MSG]",d),m=m.replace("[STATUS]",a);J.alertError(m);h.error("Google returned KML error: "+d+" ("+a+")");h.error("KML file: "+p.getUrl())}}});google.maps.event.addListener(p,"defaultviewport_changed",function(){});p.setMap(a)},buildTrafficLayer:function(){(new google.maps.TrafficLayer).setMap(a)},
        buildBikeLayer:function(){(new google.maps.BicyclingLayer).setMap(a)},buildPanoramioLayer:function(d){if("undefined"===typeof google.maps.panoramio||!google.maps.panoramio||null==google.maps.panoramio)return h.error("We cannot access Panoramio library. Aborting.."),!1;var f=new google.maps.panoramio.PanoramioLayer;f?(null!=d&&""!=d&&f.setUserId(d),f.setMap(a)):h.error("Could not instantiate Panoramio object. Aborting..")}}}(),E=function(){function m(){null!=B?s.getCenter()!=B.getCenter()&&(h.info("Panning map back to its original bounds center: "+
        B.getCenter()),s.fitBounds(B),s.setCenter(B.getCenter())):null!=K&&(h.info("Panning map back to its original center: "+K+" and updated zoom: "+O),s.setCenter(K),s.setZoom(O))}function d(e){a(e+" input#a_address").val("");a(e+" input#b_address").val("");a(e+" input#a_address").removeClass("d_error");a(e+" input#b_address").removeClass("d_error");a("input#"+k+"_avoid_hway").prop("checked",!1);a("input#"+k+"_avoid_tolls").prop("checked",!1);a("input#"+k+"_radio_km").prop("checked",!1);a("input#"+k+"_radio_miles").prop("checked",
        !0)}function p(e,c){var l=v(e.content,c),g="div#direction-controls-placeholder-"+k,f=a("div#rendered-directions-placeholder-"+k);google.maps.event.addListener(e,"click",function(){d(g);a(g).fadeOut();H.setMap(null);f.html("");f.hide();a(g+" button#print_sub").hide();r(e,l,g);b(e,l,g,f);C.setContent(l.bubbleContent);C.setOptions({disableAutoPan:"true"===U?!1:!0});C.open(s,this)})}function b(e,c,l,g){var f="div#bubble-"+c.bubbleHolderId,b=e.content,b=b.replace("Lat/Long: ",""),h=!1==(null==t?!1:!0)||
        null==t.getPosition()?"":t.getPosition();a(document).on("click",f+" a.dirToHereTrigger",function(){this.id==="toHere-"+c.bubbleHolderId&&(a(l).fadeIn(),a(l+" input#a_address").val(h),a(l+" input#b_address").val(b),"miles"===L?(a("input#"+k+"_radio_miles").prop("checked",!0),a("input#"+k+"_radio_km").prop("checked",!1)):"km"===L&&(a("input#"+k+"_radio_km").prop("checked",!0),a("input#"+k+"_radio_miles").prop("checked",!1)))});a(document).on("click",f+" a.dirFromHereTrigger",function(){this.id==="fromHere-"+
        c.bubbleHolderId&&(a(l).fadeIn(),a(l+" input#a_address").val(b),a(l+" input#b_address").val(h),"miles"===L?(a("input#"+k+"_radio_miles").prop("checked",!0),a("input#"+k+"_radio_km").prop("checked",!1)):"km"===L&&(a("input#"+k+"_radio_km").prop("checked",!0),a("input#"+k+"_radio_miles").prop("checked",!1)))});a(document).on("click",l+" div.d_close-wrapper",function(e){d(l);a(this).parent().fadeOut();H.setMap(null);g.html("");g.hide();a(l+" button#print_sub").hide();m();return!1})}function r(e,c,l){V.getPanoramaByLocation(e.position,
        50,function(g,b){if(b===google.maps.StreetViewStatus.OK)a(document).on("click","a#trigger-"+c.bubbleHolderId,function(){var g={navigationControl:!0,enableCloseButton:!0,addressControl:!1,linksControl:!0,scrollwheel:!1,addressControlOptions:{position:google.maps.ControlPosition.BOTTOM},position:e.position,pov:{heading:165,pitch:0,zoom:1}},b=new google.maps.StreetViewPanorama(document.getElementById("bubble-"+c.bubbleHolderId),g);b.setVisible(!0);google.maps.event.addListener(C,"closeclick",function(){d(l);
            a(l).fadeOut();null!=b&&(b.unbind("position"),b.setVisible(!1));b=null});google.maps.event.addListener(b,"closeclick",function(){null!=b&&(b.unbind("position"),b.setVisible(!1),a("div#bubble-"+c.bubbleHolderId).css("background","none"));b=null})});else h.warn("There is not street view available for this marker location: "+e.position+" status: "+b),a(document).on("click","a#trigger-"+c.bubbleHolderId,function(a){a.preventDefault()}),a("a#trigger-"+c.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important"),
            google.maps.event.addListener(C,"domready",function(){a("a#trigger-"+c.bubbleHolderId).removeAttr("href");a("a#trigger-"+c.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important")})})}function n(){var e="div#direction-controls-placeholder-"+k,c=a("div#rendered-directions-placeholder-"+k);a(document).on("click",e+" a#reverse-btn",function(c){c=a(e+" input#a_address").val();var g=a(e+" input#b_address").val();a(e+" input#a_address").val(g);a(e+" input#b_address").val(c);
        return!1});a(document).on("click",e+" a#d_options_show",function(){a(e+" a#d_options_hide").show();a(e+" a#d_options_show").hide();a(e+" div#d_options").show();return!1});a(document).on("click",e+" a#d_options_hide",function(){a(e+" a#d_options_hide").hide();a(e+" a#d_options_show").show();a(e+" div#d_options").hide();a("input#"+k+"_avoid_hway").prop("checked",!1);a("input#"+k+"_avoid_tolls").prop("checked",!1);a("input#"+k+"_radio_km").prop("checked",!1);a("input#"+k+"_radio_miles").prop("checked",
        !0);return!1});a(document).on("click",e+" button#d_sub",function(){var l=a(e+" input#a_address").val(),g=a(e+" input#b_address").val(),b=!1;if(null==l||""==l)a(e+" input#a_address").addClass("d_error"),b=!0;if(null==g||""==g)a(e+" input#b_address").addClass("d_error"),b=!0;if(!b){a(e+" button#d_sub").prop("disabled",!0).html("Please wait..");var d=google.maps.DirectionsTravelMode.DRIVING;a(e+" a#dir_w_btn").hasClass("selected")&&(d=google.maps.DirectionsTravelMode.WALKING);var b=a("input#"+k+"_avoid_hway").is(":checked"),
        f=a("input#"+k+"_avoid_tolls").is(":checked"),m=a("input#"+k+"_radio_miles").is(":checked"),d={origin:l,destination:g,travelMode:d,provideRouteAlternatives:!0};b&&(d.avoidHighways=!0);f&&(d.avoidTolls=!0);d.unitSystem=m?google.maps.DirectionsUnitSystem.IMPERIAL:google.maps.DirectionsUnitSystem.METRIC;W.route(d,function(b,d){d==google.maps.DirectionsStatus.OK?(c.html(""),c.show(),H.setMap(s),H.setDirections(b),a(e+" button#d_sub").removeAttr("disabled").html("Get directions"),a(e+" button#print_sub").fadeIn(),
        C.close()):(h.error('Could not route directions from "'+l+'" to "'+g+'", got result from Google: '+d),c.html("<span style='font-size: 12px; font-weight: bold; color: red'>Could not route directions from<br />'"+l+"' to<br />'"+g+"'<br />Got result from Google: ["+d+"]</span>"),a(e+" button#print_sub").hide(),a(e+" button#d_sub").removeAttr("disabled").html("Get directions"))})}});a(document).on("click",e+" button#print_sub",function(){var c=a(e+" input#a_address").val(),g=a(e+" input#b_address").val(),
        b="d";a(e+" a#dir_w_btn").hasClass("selected")&&(b="w");c="http://maps.google.com/?saddr="+c+"&daddr="+g+"&dirflg="+b+"&pw=2";c=a("input#"+k+"_radio_miles").is(":checked")?c+"&doflg=ptm":c+"&doflg=ptk";"d"===b&&(b=a("input#"+k+"_avoid_hway").is(":checked"),g=a("input#"+k+"_avoid_tolls").is(":checked"),b&&(c+="&dirflg=h"),g&&(c+="&dirflg=t"));window.open(c);return!1});a(document).on("change focus",e+" input#a_address",function(){a(e+" input#a_address").removeClass("d_error");return!1});a(document).on("change focus",
        e+" input#b_address",function(){a(e+" input#b_address").removeClass("d_error");return!1});a(document).on("click",e+" .kd-button",function(){var c=this.id;"dir_d_btn"==c?a(e+" a#dir_d_btn").hasClass("selected")?h.warn("Driving travel mode is already selected"):(a(e+" a#dir_d_btn").addClass("selected"),a(e+" a#dir_w_btn").removeClass("selected")):"dir_w_btn"==c&&(a(e+" a#dir_w_btn").hasClass("selected")?h.warn("Walking travel mode is already selected"):(a(e+" a#dir_w_btn").addClass("selected"),a(e+
        " a#dir_d_btn").removeClass("selected")));return!1})}function v(a,c){var l=Math.floor(111111*Math.random()),l=l+"-"+k,g="<div id='bubble-"+l+"' style='height: 130px !important; width: 300px !important;' class='bubble-content'>";if(c.geoMashup)var b=c.postTitle.substring(0,30),g=g+""+("<p class='geo-mashup-post-title'><a title='Original post: "+c.postTitle+"' href='"+c.postLink+"'>"+b+"..</a></p>"),g=g+("<p class='geo-mashup-post-excerpt'>"+c.postExcerpt+"</p>");else g+="<h4>"+f.translations.address+
        ":</h4>",g+="<p class='custom-bubble-text'>"+a+"</p>",""!=c.customBubbleText&&(g+="<p class='custom-bubble-text'>"+c.customBubbleText+"</p>");g+="<div class='custom-bubble-links-section'>";g+="<hr />";g+="<p class='custom-bubble-text'>"+f.translations.directions+": <a id='toHere-"+l+"' class='dirToHereTrigger' href='javascript:void(0);'>"+f.translations.toHere+"</a> - <a id='fromHere-"+l+"' class='dirFromHereTrigger' href='javascript:void(0);'>"+f.translations.fromHere+"</a> | <a id='trigger-"+l+
        "' class='streetViewTrigger' href='javascript:void(0);'>"+f.translations.streetView+"</a></p>";g+="</div></div>";return{bubbleHolderId:l,bubbleContent:g}}function T(e,c){var b=1;a.each(e,function(){null==this.excerpt&&(this.excerpt="");h.info("Looping over JSON object:\n\tTitle: "+this.title+"\n\tAddy: "+this.addy+"\n\tLink: "+this.permalink+"\n\tExcerpt: "+this.excerpt);var a=this.addy.split(f.sep);a[0]=this.location;x(b,a,this.title,this.permalink,this.excerpt,c);b++});h.info("Have "+(b-1)+" destinations for marker Geo mashup..")}
        function u(a,c,b,g,d,f){null!=c[2]?-1!=c[2].indexOf("No description provided")&&(c[2]=""):c[2]="";h.info("Storing address: "+c[0]+" for marker-to-be for the map ID: "+k);D.push({address:c[0],animation:google.maps.Animation.DROP,zIndex:a,markerIcon:c[1],customBubbleText:c[2],markerHoverText:"",postTitle:b,postLink:g,postExcerpt:d,geoMashup:f})}function x(a,c,b,g,d,f){var m=[];-1!=c[0].indexOf(",")?m=c[0].split(","):-1!=c[0].indexOf(";")&&(m=c[0].split(";"));if(0==m.length)return h.warn("Exploded lat/long array has length of zero"),
            !1;m[0]=w.trim(m[0]);m[1]=w.trim(m[1]);if(""==m[0]||""==m[1])return h.warn("Lat or Long are empty string"),!1;c[0]=new google.maps.LatLng(parseFloat(m[0]),parseFloat(m[1]));u(a,c,b,g,d,f)}function G(){clearTimeout(M);if(0<D.length){var e=D.shift();e.address instanceof google.maps.LatLng?(h.info("No need to query Geo service for ["+e.address+"]. Have left "+D.length+" items to process!"),E(e)):(h.info("Passing ["+e.address+"] to Geo service. Have left "+D.length+" items to process!"),X.geocode({address:e.address},
            function(a,c){Q(a,c,e)}))}else{y();if(0<N.length){var c="";a.each(N,function(a,e){c+="&nbsp;&nbsp;&nbsp;<b>"+(1+a)+". "+e+"</b><br />"});J.alertError(f.errors.badAddresses.replace("[REPLACE]",c))}N=[]}}function y(){var e=!1,c=null==t?!1:!0;1<z.length?(a.each(z,function(a,e){A.contains(e.position)||A.extend(e.position)}),e=!0):1==z.length&&(c?(A.extend(z[0].position),e=!0):(s.setCenter(z[0].position),O=s.getZoom(),K=s.getCenter()));e&&(c&&null!=t.getPosition()&&(h.info("Extended bounds with Geo marker position: "+
            t.getPosition()),A.extend(t.getPosition())),B=A,null!=A&&s.fitBounds(A))}function E(a){var c=a.address,b=c.lat().toFixed(6)+", "+c.lng().toFixed(6);a.address="Lat/Long: "+b;a.markerHoverText=a.customBubbleText+b;Y(c,a);G()}function Q(a,c,b){c==google.maps.GeocoderStatus.OK?(a=a[0].geometry.location,b.markerHoverText=b.customBubbleText+" ("+b.address+")",Y(a,b),M=setTimeout(function(){G()},330)):c==google.maps.GeocoderStatus.OVER_QUERY_LIMIT?(h.warn("GeocoderStatus.OVER_QUERY_LIMIT"),y(),D.push(b),
            M=setTimeout(function(){G()},3E3)):c==google.maps.GeocoderStatus.ZERO_RESULTS&&(h.warn("GeocoderStatus.ZERO_RESULTS"),h.warn("Got ZERO results for ["+b.address+"]. Have left "+z.length+" items to process"),N.push(b.address),M=setTimeout(function(){G()},400))}function Y(e,c){var b=new google.maps.Marker({position:e,title:c.markerHoverText,content:c.address,zIndex:c.zIndex+1E3,map:s});if(b){if(c.markerIcon){var g=c.markerIcon;if("undefined"==typeof g||"undefined"===g)g="1-default.png";b.setIcon(f.customMarkersUri+
            g);var d=null,d=["4-default.png","5-default.png","6-default.png","7-default.png"];-1!=a.inArray(g,["1-default.png","2-default.png"])?(g=f.customMarkersUri+"msmarker.shadow.png",d=P(g,59,32,0,0,16,33)):-1!=a.inArray(g,d)?(g=f.customMarkersUri+"msmarker.shadow.png",d=P(g,59,32,0,0,21,34)):-1!=g.indexOf("3-default")?(g=f.customMarkersUri+"beachflag_shadow.png",d=P(g,37,32,0,0,10,33)):d=P(f.customMarkersUri+"shadow.png",68,37,0,0,32,38);b.setShadow(d)}p(b,c);R||(n(),R=!0);z.push(b)}}function P(a,c,b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           d,f,m,h){return new google.maps.MarkerImage(a,new google.maps.Size(c,b),new google.maps.Point(d,f),new google.maps.Point(m,h))}function q(a,c,b){var d={clickable:!1,cursor:"pointer",draggable:!1,flat:!0,icon:{url:f.customMarkersUri+"gpsloc.png",size:new google.maps.Size(34,34),scaledSize:new google.maps.Size(17,17),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,8)},optimized:!1,position:new google.maps.LatLng(0,0),title:"Current location",zIndex:2};c&&(d=this.copyOptions_(d,c));
            c={clickable:!1,radius:0,strokeColor:"1bb6ff",strokeOpacity:0.4,fillColor:"61a0bf",fillOpacity:0.4,strokeWeight:1,zIndex:1};b&&(c=this.copyOptions_(c,b));this.marker_=new google.maps.Marker(d);this.circle_=new google.maps.Circle(c);this.map=this.position=this.accuracy=null;this.set("minimum_accuracy",null);this.set("position_options",{enableHighAccuracy:!0,maximumAge:1E3});this.circle_.bindTo("map",this.marker_);a&&this.setMap(a)}var z,D,N,L,S,M,R,s,I,U,B,K,O,k,X,A,C,V,H,W,t=null;q.prototype=new google.maps.MVCObject;
        q.prototype.set=function(a,c){if(/^(?:position|accuracy)$/i.test(a))throw"'"+a+"' is a read-only property.";/map/i.test(a)?this.setMap(c):google.maps.MVCObject.prototype.set.apply(this,arguments)};q.prototype.marker_=null;q.prototype.circle_=null;q.prototype.getMap=function(){return this.map};q.prototype.getPositionOptions=function(){return this.get("position_options")};q.prototype.setPositionOptions=function(a){this.set("position_options",a)};q.prototype.getPosition=function(){return this.position};
        q.prototype.getBounds=function(){return this.position?this.circle_.getBounds():null};q.prototype.getAccuracy=function(){return this.accuracy};q.prototype.getMinimumAccuracy=function(){return this.get("minimum_accuracy")};q.prototype.setMinimumAccuracy=function(a){this.set("minimum_accuracy",a)};q.prototype.watchId_=-1;q.prototype.setMap=function(a){this.map=a;this.notify("map");a?this.watchPosition_():(this.marker_.unbind("position"),this.circle_.unbind("center"),this.circle_.unbind("radius"),this.position=
            this.accuracy=null,navigator.geolocation.clearWatch(this.watchId_),this.watchId_=-1,this.marker_.setMap(a))};q.prototype.setMarkerOptions=function(a){this.marker_.setOptions(this.copyOptions_({},a))};q.prototype.setCircleOptions=function(a){this.circle_.setOptions(this.copyOptions_({},a))};q.prototype.updatePosition_=function(a){var c=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),b=null==this.marker_.getMap();if(b){if(null!=this.getMinimumAccuracy()&&a.coords.accuracy>this.getMinimumAccuracy())return;
            this.marker_.setMap(this.map);this.marker_.bindTo("position",this);this.circle_.bindTo("center",this,"position");this.circle_.bindTo("radius",this,"accuracy")}this.accuracy!=a.coords.accuracy&&google.maps.MVCObject.prototype.set.call(this,"accuracy",a.coords.accuracy);!b&&null!=this.position&&this.position.equals(c)||google.maps.MVCObject.prototype.set.call(this,"position",c)};q.prototype.watchPosition_=function(){var a=this;navigator.geolocation&&(this.watchId_=navigator.geolocation.watchPosition(function(c){a.updatePosition_(c)},
            function(c){google.maps.event.trigger(a,"geolocation_error",c)},this.getPositionOptions()))};q.prototype.copyOptions_=function(a,c){for(var b in c)!0!==q.DISALLOWED_OPTIONS[b]&&(a[b]=c[b]);return a};q.DISALLOWED_OPTIONS={map:!0,position:!0,radius:!0};return{init:function(a,b,d){s=a;k=s.getDiv().id;U=b;L=d;google.maps.event.addListener(s,"click",function(){m()});z=[];N=[];D=[];O=5;B=K=I=M=null;S=R=!1;X=new google.maps.Geocoder;A=new google.maps.LatLngBounds;C=new google.maps.InfoWindow;V=new google.maps.StreetViewService;
            W=new google.maps.DirectionsService;rendererOptions={draggable:!0};H=new google.maps.DirectionsRenderer(rendererOptions);H.setPanel(document.getElementById("rendered-directions-placeholder-"+k))},setGeoLocationIfEnabled:function(a){"true"===a&&(t=new q,google.maps.event.addListenerOnce(t,"position_changed",function(){s.setCenter(this.getPosition());s.fitBounds(this.getBounds())}),google.maps.event.addListener(t,"geolocation_error",function(a){alert("There was an error creating Geolocation marker: "+
            a.message+"\n\nProceeding with normal map generation..");h.error("There was an error obtaining your position. Message: "+a.message);t=null}),t.setPositionOptions({enableHighAccuracy:!0,timeout:6E3,maximumAge:0}),t.setMap(s))},buildAddressMarkers:function(a,b,d){S=!0;I=w.trim(a);I=w.searchReplace(I,"'","");if("true"===b)a=F(I),"true"===d?T(a,!0):"false"===d&&T(a,!1),G();else if(null==b||"false"===b){d=I.split("|");h.info("Exploded CSV into locations: "+d);for(a=0;a<d.length;a++){var g=d[a];null!=g&&
            ""!=g&&(g=w.trim(g),""==g?h.warn("Given extra marker address is empty"):(b=a+1,g=g.split(f.sep),w.isNumeric(g[0])?x(b,g,"","","",!1):w.isAlphaNumeric(g[0])?u(b,g,"","","",!1):(u(b,g,"","","",!1),h.warn("Unknown type of geo destination in regexp: "+g[0]+", fallingback to store it as an address"))))}G()}},isBuildAddressMarkersCalled:function(){return S}}},w=function(){return{isNumeric:function(a){return/^([0-9?(\-.,;\s{1,})]+)$/.test(a)},isAlphaNumeric:function(a){return/^([a-zA-Z0-9?(/\-.,\s{1,})]+)$/.test(a)},
        trim:function(a){return a.replace(/^\s+|\s+$/g,"")},searchReplace:function(a,d,f){return a.replace(RegExp(d,"g"),f)}}}(),h=function(){var a=function(a){navigator.userAgent.match(/msie|trident/i)||console.log(a)};return{info:function(d){a("Info :: "+d)},raw:function(d){a(d)},warn:function(d){a("Warning :: "+d)},error:function(d){a("Error :: "+d)},fatal:function(d){a("Fatal :: "+d)}}}(),J=function(){return{alertError:function(f){function d(b,d){b.preventDefault();var f=a(d).closest("div.cgmp-popup-shortcode-dialog");
        f&&a(f).remove();0==a("div.cgmp-popup-shortcode-dialog").length&&a("#cgmp-popup-mask").remove()}var h=a('<div id="cgmp-popup-mask"/>'),b=Math.random().toString(36).substring(3),n=a('<div id="'+b+'" class="cgmp-popup-shortcode-dialog cgmp-popup-window">');n.html("<div class='dismiss-container'><a class='dialog-dismiss' href='javascript:void(0)'>\u00c3\u2014</a></div><p style='text-align: left; padding: 10px 10px 0 10px'>"+f+"</p><div align='center'><input type='button' class='close-dialog' value='Close' /></div>");
        a("body").append(h);a("body").append(n);f=a(document).height();h=a(window).width();a("#cgmp-popup-mask").css({width:h,height:f,opacity:0.1});1==a("#cgmp-popup-mask").length&&a("#cgmp-popup-mask").show();f=a(window).height();h=a(window).width();a("div#"+b).css("top",f/2-a("div#"+b).height()/2);a("div#"+b).css("left",h/2-a("div#"+b).width()/2);a("div#"+b).fadeIn(500);a(".cgmp-popup-window .close-dialog").click(function(b){d(b,a(this))});a(".cgmp-popup-window .dialog-dismiss").click(function(b){d(b,
            a(this))});a("#cgmp-popup-mask").click(function(){a(this).remove();a(".cgmp-popup-window").remove()});a(window).resize(function(){var b=a(".window"),d=a(document).height(),f=a(window).width();a("#cgmp-popup-mask").css({width:f,height:d});d=a(window).height();f=a(window).width();b.css("top",d/2-b.height()/2);b.css("left",f/2-b.width()/2)})}}}();if(0==a("object#global-data-placeholder").length)h.fatal("The global HTML <object> element is undefined. Aborting map generation .. d[-_-]b");else{u=document.head||
        document.getElementsByTagName("head")[0]||document.documentElement;v=document.createElement("link");v.type="text/css";v.rel="stylesheet";v.href=a("object#global-data-placeholder").find("param#cssHref").val();v.media="screen";u.appendChild(v);f.sep=a("object#global-data-placeholder").find("param#sep").val();f.customMarkersUri=a("object#global-data-placeholder").find("param#customMarkersUri").val();f.errors=a("object#global-data-placeholder").find("param#errors").val();f.errors=F(f.errors);f.translations=
        a("object#global-data-placeholder").find("param#translations").val();f.translations=F(f.translations);u=parseFloat(a.fn.jquery.split(".")[0]);v=parseFloat(a.fn.jquery.split(".")[1]);if(1>u||1<=u&&2>u&&3>v)return alert(f.errors.oldJquery),h.fatal("Client uses jQuery older than the version 1.3.0. Aborting map generation .."),!1;if("undefined"===typeof google||!google)return J.alertError(f.errors.msgNoGoogle),h.fatal("We do not have reference to Google API. Aborting map generation .."),!1;if("undefined"!==
        typeof GMap2&&GMap2)return J.alertError(f.errors.msgApiV2),h.fatal("It looks like the webpage has reference to GMap2 object from Google API v2. Aborting map generation .."),!1;f.language=a("object#global-data-placeholder").find("param#language").val();google.load("maps","3",{other_params:"sensor=false&libraries=panoramio&language="+f.language,callback:function(){n()}})}})("undefined"!==typeof n&&null!=n&&n?n:jQuery)}if("undefined"===typeof jQuery||null==jQuery){var Q=!1,x=document.head||document.getElementsByTagName("head")[0]||
    document.documentElement,n=document.createElement("script");n.type="text/javascript";n.src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";n.onload=n.onreadystatechange=function(){if(!Q&&(!this.readyState||/loaded|complete/.test(n.readyState))){Q=!0;var Z=jQuery.noConflict();E(Z);n.onload=n.onreadystatechange=null;x&&n.parentNode&&x.removeChild(n);n=void 0}};x.appendChild(n)}else E()})();