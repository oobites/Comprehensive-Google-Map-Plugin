(function(){function D(m){(function(a){function m(){a("object.cgmp-json-string-placeholder").each(function(e,q){var f=a(q).attr("id"),f=a(q).find("param#json-string-"+f).val(),f=z.searchReplace(f,"'",""),f=f.replace("&quot;",""),b=E(f);if("undefined"===typeof b||!b)return k.fatal("We did not parse JSON from OBJECT param. Aborting map generation .."),!1;if(0<a("div#"+b.id).length){var l=new google.maps.Map(document.getElementById(b.id));y.initMap(l,b.bubbleautopan,parseInt(b.zoom),b.maptype);A.init(l);
    f=new D;f.init(l,b.bubbleautopan,b.distanceunits,b);f.setGeoLocationIfEnabled(b.enablegeolocationmarker);y.setMapControls({mapTypeControl:"true"===b.maptypecontrol,panControl:"true"===b.pancontrol,zoomControl:"true"===b.zoomcontrol,scaleControl:"true"===b.scalecontrol,scrollwheel:"true"===b.scrollwheelcontrol,streetViewControl:"true"===b.streetviewcontrol,tilt:"true"===b.tiltfourtyfive?45:null,draggable:"true"===b.draggable,overviewMapControl:!0,overviewMapControlOptions:{opened:!1}});"true"===b.showpanoramio&&
    A.buildPanoramioLayer(b.panoramiouid);"true"===b.showbike&&A.buildBikeLayer();"true"===b.showtraffic&&A.buildTrafficLayer();null!=b.kml&&""!=z.trim(b.kml)?A.buildKmlLayer(b.kml):(null!=b.markerlist&&""!=z.trim(b.markerlist)&&f.buildAddressMarkers(b.markerlist,b.addmarkermashup,b.addmarkermashupbubble),f.isBuildAddressMarkersCalled()||F.alertError(c.errors.msgMissingMarkers));a(document).ready(function(){function c(){null!=q&&clearTimeout(q);a(f).is(":hidden")?q=setTimeout(c,e):setTimeout(function(){var a=
        l;if(a){var c=a.getZoom(),b=a.getBounds(),q=a.getCenter();google.maps.event.trigger(a,"resize");a.setZoom(c);a.setCenter(q);a.getBounds(b)}},e)}var q=null,e=500,f="div#"+b.id;a(f).is(":hidden")?(k.warn("Map placeholder DIV is hidden, must resize the map!"),c()):setTimeout(function(){c()},4*e)})}else k.fatal("It looks like the map DIV placeholder ID ["+b.id+"] does not exist in the page!")})}var E=function(a){},v=parseFloat(a.fn.jquery.split(".")[0]),t=parseFloat(a.fn.jquery.split(".")[1]);1<=v&&2>
    v&&4<=t?E=a.parseJSON:window.JSON&&window.JSON.parse?E=window.JSON.parse:k.fatal("Using parseJson stub..");var c={},y=function(){var a={};return{initMap:function(c,k,b,l){a=c;c=[];for(var $ in google.maps.MapTypeId)c.push(google.maps.MapTypeId[$]);"OSM"==l?(c.push(l),a.mapTypes.set(l,new google.maps.ImageMapType({getTileUrl:function(a,c){return"http://tile.openstreetmap.org/"+c+"/"+a.x+"/"+a.y+".png"},tileSize:new google.maps.Size(256,256),name:"OpenStreet",maxZoom:20}))):"ROADMAP"==l?l=google.maps.MapTypeId.ROADMAP:
    "SATELLITE"==l?l=google.maps.MapTypeId.SATELLITE:"HYBRID"==l?l=google.maps.MapTypeId.HYBRID:"TERRAIN"==l&&(l=google.maps.MapTypeId.TERRAIN);a.setOptions({zoom:b,mapTypeId:l,mapTypeControlOptions:{mapTypeIds:c}})},setMapControls:function(c){a.setOptions(c)}}}(),A=function(){var a={};return{init:function(c){a=c},buildKmlLayer:function(q){if(0>q.toLowerCase().indexOf("http"))return k.error("KML URL must start with HTTP(S). Aborting.."),!1;var f=new google.maps.KmlLayer(q);google.maps.event.addListener(f,
    "status_changed",function(){var a=f.getStatus();if(a!=google.maps.KmlLayerStatus.OK){var l="";switch(a){case google.maps.KmlLayerStatus.DOCUMENT_NOT_FOUND:l=c.errors.kmlNotFound;break;case google.maps.KmlLayerStatus.DOCUMENT_TOO_LARGE:l=c.errors.kmlTooLarge;break;case google.maps.KmlLayerStatus.FETCH_ERROR:l=c.errors.kmlFetchError;break;case google.maps.KmlLayerStatus.INVALID_DOCUMENT:l=c.errors.kmlDocInvalid;break;case google.maps.KmlLayerStatus.INVALID_REQUEST:l=c.errors.kmlRequestInvalid;break;
        case google.maps.KmlLayerStatus.LIMITS_EXCEEDED:l=c.errors.kmlLimits;break;case google.maps.KmlLayerStatus.TIMED_OUT:l=c.errors.kmlTimedOut;break;case google.maps.KmlLayerStatus.UNKNOWN:l=c.errors.kmlUnknown}if(""!=l){var q=c.errors.kml.replace("[MSG]",l),q=q.replace("[STATUS]",a);F.alertError(q);k.error("Google returned KML error: "+l+" ("+a+")");k.error("KML file: "+f.getUrl())}}});google.maps.event.addListener(f,"defaultviewport_changed",function(){});f.setMap(a)},buildTrafficLayer:function(){(new google.maps.TrafficLayer).setMap(a)},
    buildBikeLayer:function(){(new google.maps.BicyclingLayer).setMap(a)},buildPanoramioLayer:function(c){if("undefined"===typeof google.maps.panoramio||!google.maps.panoramio||null==google.maps.panoramio)return k.error("We cannot access Panoramio library. Aborting.."),!1;var f=new google.maps.panoramio.PanoramioLayer;f?(null!=c&&""!=c&&f.setUserId(c),f.setMap(a)):k.error("Could not instantiate Panoramio object. Aborting..")}}}(),D=function(){function e(){clearTimeout(K);if(0<G.length){var d=G.shift();
    k.info("Geocoding '"+d.address+"' Left "+G.length+" items to geocode..");U.geocode({address:d.address},function(a,g){q(a,g,d)})}else{t();if(P){k.warn("Reset server map data cache required");if(V){a.each(w,function(d,g){var h=(g.position+"").replace(RegExp("\\(|\\)","g"),"");a.each(Q,function(a,d){if(a===g.content&&-1!=d.validated_address_csv_data.indexOf(c.geoValidationClientRevalidate))return d.validated_address_csv_data=d.validated_address_csv_data.replace(RegExp(c.geoValidationClientRevalidate,
    "g"),h),!1})});var h=JSON.stringify(Q);a.post(c.ajaxurl,{action:"cgmp_ajax_cache_map_action",data:h,geoMashup:"true"},function(a){k.info("Posting map data to the server..");null!=a&&"OK"===a&&k.info("Map geo mashup cache was reset on the server")})}else{var g=H.markerlist.split("|"),r=H.debug.widget_id,b=H.debug.post_id,h=H.debug.post_type,f=H.debug.shortcodeid,l=[];a.each(w,function(d,h){var r=(h.position+"").replace(RegExp("\\(|\\)","g"),"");a.each(g,function(a,g){var b=g.split(c.sep);if(b[0]===
    h.content)return k.info(b[0]+" matched "+h.content+" (marker#"+(d+1)+")"),-1!=g.indexOf(c.geoValidationClientRevalidate)?l[d]=g.replace(RegExp(c.geoValidationClientRevalidate,"g"),r):l[d]=g,!1})});var e=l.join("|");"undefined"!==typeof r&&"undefined"!==r?a.post(c.ajaxurl,{action:"cgmp_ajax_cache_map_action",data:e,geoMashup:"false",widgetId:r},function(a){k.info("Posting map data to the server..");null!=a&&"OK_WIDGET"===a&&k.info("Map cache was reset on the server for widget#"+r)}):"undefined"!==
    typeof b&&"undefined"!==b&&a.post(c.ajaxurl,{action:"cgmp_ajax_cache_map_action",data:e,geoMashup:"false",postId:b,postType:h,shortcodeId:f},function(a){k.info("Posting map data to the server..");null!=a&&("OK_POST"===a?k.info("Map cache was reset on the server for post#"+b+" shortcode#"+f):"OK_PAGE"===a&&k.info("Map cache was reset on the server for page#"+b+" shortcode#"+f))})}P=!1}k.info("Have "+w.length+" markers on the map")}}function q(a,h,g){h==google.maps.GeocoderStatus.OK?(k.info("Geocoding '"+
    g.address+"' OK!"),l(a[0].geometry.location,g),K=setTimeout(function(){e()},300)):h==google.maps.GeocoderStatus.OVER_QUERY_LIMIT?(t(),G.push(g),K=setTimeout(function(){e()},3E3)):h==google.maps.GeocoderStatus.ZERO_RESULTS&&(k.warn("Got ZERO_RESULTS for ["+g.address+"]"),K=setTimeout(function(){e()},300))}function f(d,h){var g=1;Q=d;a.each(d,function(a,d){if("live_debug"===a||"debug"===a)return!0;null==this.excerpt&&(this.excerpt="");"undefined"!==typeof this.validated_address_csv_data&&""!==this.validated_address_csv_data||
k.error("Validated address from: "+this.permalink+" returned empty, perhaps OVER_QUERY_LIMIT when validating on the server..");b(this.validated_address_csv_data,this.title,this.permalink,this.excerpt,h,!0);g++})}function b(a,h,g,r,b,f){if("undefined"===typeof a||""===a)k.fatal("Not parsing empty validated address csv data.. Skipping");else{k.info("Raw: "+a);a=a.split("|");for(var q=0;q<a.length;q++){var e=a[q];if(null!=e&&""!=e){var e=e.split(c.sep),n=e[0],m=e[1],p=e[2],e=e[3];-1!=p.indexOf(c.noBubbleDescriptionProvided)&&
(p="");n={address:n,animation:google.maps.Animation.DROP,zIndex:q+1,markerIcon:m,customBubbleText:p,markerHoverText:p+" ("+n+")",postTitle:h,postLink:g,postExcerpt:r,infoBubbleContainPostLink:b,geoMashup:f};if(e===c.geoValidationClientRevalidate)P=!0,G.push(n);else{m=[];-1!=e.indexOf(",")?m=e.split(","):-1!=e.indexOf(";")&&(m=e.split(";"));m[0]=z.trim(m[0]);m[1]=z.trim(m[1]);if(""===m[0]||""===m[1])return k.warn("Lat or Long are empty string"),!1;e=new google.maps.LatLng(parseFloat(m[0]),parseFloat(m[1]));
    l(e,n)}}}}}function l(d,h){var g=new google.maps.Marker({position:d,title:h.markerHoverText,content:h.address,zIndex:h.zIndex+1E3,map:s});if(g){k.info("Built marker: "+h.address+" "+d);if(h.markerIcon){var r=h.markerIcon;if("undefined"==typeof r||"undefined"===r)r="1-default.png";g.setIcon(c.customMarkersUri+r);var b=null,b=["4-default.png","5-default.png","6-default.png","7-default.png"];-1!=a.inArray(r,["1-default.png","2-default.png"])?(r=c.customMarkersUri+"msmarker.shadow.png",b=m(r,59,32,0,
    0,16,33)):-1!=a.inArray(r,b)?(r=c.customMarkersUri+"msmarker.shadow.png",b=m(r,59,32,0,0,21,34)):-1!=r.indexOf("3-default")?(r=c.customMarkersUri+"beachflag_shadow.png",b=m(r,37,32,0,0,10,33)):b=m(c.customMarkersUri+"shadow.png",68,37,0,0,32,38);g.setShadow(b)}y(g,h);R||(F(),R=!0);w.push(g)}}function m(a,h,g,r,c,b,e){return new google.maps.MarkerImage(a,new google.maps.Size(h,g),new google.maps.Point(r,c),new google.maps.Point(b,e))}function t(){var d=!1,h=null==u?!1:!0;1<w.length?(a.each(w,function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             d){x.contains(d.position)||x.extend(d.position)}),d=!0):1==w.length&&(h?(x.extend(w[0].position),d=!0):(s.setCenter(w[0].position),N=s.getZoom(),L=s.getCenter()));d&&(h&&null!=u.getPosition()&&(k.info("Extended bounds with Geo marker position: "+u.getPosition()),x.extend(u.getPosition())),B=x,null!=x&&s.fitBounds(x))}function T(){null!=B?s.getCenter()!=B.getCenter()&&(k.info("Panning map back to its original bounds center: "+B.getCenter()),s.fitBounds(B),s.setCenter(B.getCenter())):null!=L&&(k.info("Panning map back to its original center: "+
    L+" and updated zoom: "+N),s.setCenter(L),s.setZoom(N))}function v(d){a(d+" input#a_address").val("");a(d+" input#b_address").val("");a(d+" input#a_address").removeClass("d_error");a(d+" input#b_address").removeClass("d_error");a("input#"+n+"_avoid_hway").prop("checked",!1);a("input#"+n+"_avoid_tolls").prop("checked",!1);a("input#"+n+"_radio_km").prop("checked",!1);a("input#"+n+"_radio_miles").prop("checked",!0)}function y(d,h){var g=O(d.content,h),c="div#direction-controls-placeholder-"+n,b=a("div#rendered-directions-placeholder-"+
    n);google.maps.event.addListener(d,"click",function(){v(c);a(c).fadeOut();I.setMap(null);b.html("");b.hide();a(c+" button#print_sub").hide();D(d,g,c);A(d,g,c,b);C.setContent(g.bubbleContent);C.setOptions({disableAutoPan:"true"===W?!1:!0});C.open(s,this)})}function A(d,h,g,c){var b="div#bubble-"+h.bubbleHolderId,e=d.content,e=e.replace("Lat/Long: ",""),f=!1==(null==u?!1:!0)||null==u.getPosition()?"":u.getPosition();a(document).on("click",b+" a.dirToHereTrigger",function(){this.id==="toHere-"+h.bubbleHolderId&&
(a(g).fadeIn(),a(g+" input#a_address").val(f),a(g+" input#b_address").val(e),"miles"===M?(a("input#"+n+"_radio_miles").prop("checked",!0),a("input#"+n+"_radio_km").prop("checked",!1)):"km"===M&&(a("input#"+n+"_radio_km").prop("checked",!0),a("input#"+n+"_radio_miles").prop("checked",!1)))});a(document).on("click",b+" a.dirFromHereTrigger",function(){this.id==="fromHere-"+h.bubbleHolderId&&(a(g).fadeIn(),a(g+" input#a_address").val(e),a(g+" input#b_address").val(f),"miles"===M?(a("input#"+n+"_radio_miles").prop("checked",
    !0),a("input#"+n+"_radio_km").prop("checked",!1)):"km"===M&&(a("input#"+n+"_radio_km").prop("checked",!0),a("input#"+n+"_radio_miles").prop("checked",!1)))});a(document).on("click",g+" div.d_close-wrapper",function(d){v(g);a(this).parent().fadeOut();I.setMap(null);c.html("");c.hide();a(g+" button#print_sub").hide();T();return!1})}function D(d,h,g){X.getPanoramaByLocation(d.position,50,function(c,b){if(b===google.maps.StreetViewStatus.OK)a(document).on("click","a#trigger-"+h.bubbleHolderId,function(){var c=
{navigationControl:!0,enableCloseButton:!0,addressControl:!1,linksControl:!0,scrollwheel:!1,addressControlOptions:{position:google.maps.ControlPosition.BOTTOM},position:d.position,pov:{heading:165,pitch:0,zoom:1}},b=new google.maps.StreetViewPanorama(document.getElementById("bubble-"+h.bubbleHolderId),c);b.setVisible(!0);google.maps.event.addListener(C,"closeclick",function(){v(g);a(g).fadeOut();null!=b&&(b.unbind("position"),b.setVisible(!1));b=null});google.maps.event.addListener(b,"closeclick",
    function(){null!=b&&(b.unbind("position"),b.setVisible(!1),a("div#bubble-"+h.bubbleHolderId).css("background","none"));b=null})});else k.warn("There is not street view available for this marker location: "+d.position+" status: "+b),a(document).on("click","a#trigger-"+h.bubbleHolderId,function(a){a.preventDefault()}),a("a#trigger-"+h.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important"),google.maps.event.addListener(C,"domready",function(){a("a#trigger-"+h.bubbleHolderId).removeAttr("href");
    a("a#trigger-"+h.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important")})})}function F(){var d="div#direction-controls-placeholder-"+n,b=a("div#rendered-directions-placeholder-"+n);a(document).on("click",d+" a#reverse-btn",function(b){b=a(d+" input#a_address").val();var c=a(d+" input#b_address").val();a(d+" input#a_address").val(c);a(d+" input#b_address").val(b);return!1});a(document).on("click",d+" a#d_options_show",function(){a(d+" a#d_options_hide").show();a(d+
    " a#d_options_show").hide();a(d+" div#d_options").show();return!1});a(document).on("click",d+" a#d_options_hide",function(){a(d+" a#d_options_hide").hide();a(d+" a#d_options_show").show();a(d+" div#d_options").hide();a("input#"+n+"_avoid_hway").prop("checked",!1);a("input#"+n+"_avoid_tolls").prop("checked",!1);a("input#"+n+"_radio_km").prop("checked",!1);a("input#"+n+"_radio_miles").prop("checked",!0);return!1});a(document).on("click",d+" button#d_sub",function(){var g=a(d+" input#a_address").val(),
    c=a(d+" input#b_address").val(),e=!1;if(null==g||""==g)a(d+" input#a_address").addClass("d_error"),e=!0;if(null==c||""==c)a(d+" input#b_address").addClass("d_error"),e=!0;if(!e){a(d+" button#d_sub").prop("disabled",!0).html("Please wait..");var f=google.maps.DirectionsTravelMode.DRIVING;a(d+" a#dir_w_btn").hasClass("selected")&&(f=google.maps.DirectionsTravelMode.WALKING);var e=a("input#"+n+"_avoid_hway").is(":checked"),q=a("input#"+n+"_avoid_tolls").is(":checked"),l=a("input#"+n+"_radio_miles").is(":checked"),
    f={origin:g,destination:c,travelMode:f,provideRouteAlternatives:!0};e&&(f.avoidHighways=!0);q&&(f.avoidTolls=!0);f.unitSystem=l?google.maps.DirectionsUnitSystem.IMPERIAL:google.maps.DirectionsUnitSystem.METRIC;Y.route(f,function(e,f){f==google.maps.DirectionsStatus.OK?(b.html(""),b.show(),I.setMap(s),I.setDirections(e),a(d+" button#d_sub").removeAttr("disabled").html("Get directions"),a(d+" button#print_sub").fadeIn(),C.close()):(k.error('Could not route directions from "'+g+'" to "'+c+'", got result from Google: '+
    f),b.html("<span style='font-size: 12px; font-weight: bold; color: red'>Could not route directions from<br />'"+g+"' to<br />'"+c+"'<br />Got result from Google: ["+f+"]</span>"),a(d+" button#print_sub").hide(),a(d+" button#d_sub").removeAttr("disabled").html("Get directions"))})}});a(document).on("click",d+" button#print_sub",function(){var b=a(d+" input#a_address").val(),c=a(d+" input#b_address").val(),h="d";a(d+" a#dir_w_btn").hasClass("selected")&&(h="w");b="http://maps.google.com/?saddr="+b+
    "&daddr="+c+"&dirflg="+h+"&pw=2";b=a("input#"+n+"_radio_miles").is(":checked")?b+"&doflg=ptm":b+"&doflg=ptk";"d"===h&&(h=a("input#"+n+"_avoid_hway").is(":checked"),c=a("input#"+n+"_avoid_tolls").is(":checked"),h&&(b+="&dirflg=h"),c&&(b+="&dirflg=t"));window.open(b);return!1});a(document).on("change focus",d+" input#a_address",function(){a(d+" input#a_address").removeClass("d_error");return!1});a(document).on("change focus",d+" input#b_address",function(){a(d+" input#b_address").removeClass("d_error");
    return!1});a(document).on("click",d+" .kd-button",function(){var b=this.id;"dir_d_btn"==b?a(d+" a#dir_d_btn").hasClass("selected")?k.warn("Driving travel mode is already selected"):(a(d+" a#dir_d_btn").addClass("selected"),a(d+" a#dir_w_btn").removeClass("selected")):"dir_w_btn"==b&&(a(d+" a#dir_w_btn").hasClass("selected")?k.warn("Walking travel mode is already selected"):(a(d+" a#dir_w_btn").addClass("selected"),a(d+" a#dir_d_btn").removeClass("selected")));return!1})}function O(a,b){var g=Math.floor(111111*
    Math.random()),g=g+"-"+n,e="<div id='bubble-"+g+"' style='height: 130px !important; width: 300px !important;' class='bubble-content'>";if(!b.geoMashup||b.geoMashup&&!b.infoBubbleContainPostLink)e+="<h4>"+c.translations.address+":</h4>",e+="<p class='custom-bubble-text'>"+a+"</p>",""!=b.customBubbleText&&(e+="<p class='custom-bubble-text'>"+b.customBubbleText+"</p>");else var f=b.postTitle.substring(0,30),e=e+""+("<p class='geo-mashup-post-title'><a title='Original post: "+b.postTitle+"' href='"+b.postLink+
    "'>"+f+"..</a></p>"),e=e+("<p class='geo-mashup-post-excerpt'>"+b.postExcerpt+"</p>");e+="<div class='custom-bubble-links-section'>";e+="<hr />";e+="<p class='custom-bubble-text'>"+c.translations.directions+": <a id='toHere-"+g+"' class='dirToHereTrigger' href='javascript:void(0);'>"+c.translations.toHere+"</a> - <a id='fromHere-"+g+"' class='dirFromHereTrigger' href='javascript:void(0);'>"+c.translations.fromHere+"</a> | <a id='trigger-"+g+"' class='streetViewTrigger' href='javascript:void(0);'>"+
    c.translations.streetView+"</a></p>";e+="</div></div>";return{bubbleHolderId:g,bubbleContent:e}}function p(a,b,e){var f={clickable:!1,cursor:"pointer",draggable:!1,flat:!0,icon:{url:c.customMarkersUri+"gpsloc.png",size:new google.maps.Size(34,34),scaledSize:new google.maps.Size(17,17),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,8)},optimized:!1,position:new google.maps.LatLng(0,0),title:"Current location",zIndex:2};b&&(f=this.copyOptions_(f,b));b={clickable:!1,radius:0,strokeColor:"1bb6ff",
    strokeOpacity:0.4,fillColor:"61a0bf",fillOpacity:0.4,strokeWeight:1,zIndex:1};e&&(b=this.copyOptions_(b,e));this.marker_=new google.maps.Marker(f);this.circle_=new google.maps.Circle(b);this.map=this.position=this.accuracy=null;this.set("minimum_accuracy",null);this.set("position_options",{enableHighAccuracy:!0,maximumAge:1E3});this.circle_.bindTo("map",this.marker_);a&&this.setMap(a)}var w,G,M,S,K,R,s,J,W,B,L,N,n,U,x,C,X,I,Y,u=null,V=!1,P=!1,Q=[],H=[];p.prototype=new google.maps.MVCObject;p.prototype.set=
    function(a,b){if(/^(?:position|accuracy)$/i.test(a))throw"'"+a+"' is a read-only property.";/map/i.test(a)?this.setMap(b):google.maps.MVCObject.prototype.set.apply(this,arguments)};p.prototype.marker_=null;p.prototype.circle_=null;p.prototype.getMap=function(){return this.map};p.prototype.getPositionOptions=function(){return this.get("position_options")};p.prototype.setPositionOptions=function(a){this.set("position_options",a)};p.prototype.getPosition=function(){return this.position};p.prototype.getBounds=
    function(){return this.position?this.circle_.getBounds():null};p.prototype.getAccuracy=function(){return this.accuracy};p.prototype.getMinimumAccuracy=function(){return this.get("minimum_accuracy")};p.prototype.setMinimumAccuracy=function(a){this.set("minimum_accuracy",a)};p.prototype.watchId_=-1;p.prototype.setMap=function(a){this.map=a;this.notify("map");a?this.watchPosition_():(this.marker_.unbind("position"),this.circle_.unbind("center"),this.circle_.unbind("radius"),this.position=this.accuracy=
    null,navigator.geolocation.clearWatch(this.watchId_),this.watchId_=-1,this.marker_.setMap(a))};p.prototype.setMarkerOptions=function(a){this.marker_.setOptions(this.copyOptions_({},a))};p.prototype.setCircleOptions=function(a){this.circle_.setOptions(this.copyOptions_({},a))};p.prototype.updatePosition_=function(a){var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),c=null==this.marker_.getMap();if(c){if(null!=this.getMinimumAccuracy()&&a.coords.accuracy>this.getMinimumAccuracy())return;
    this.marker_.setMap(this.map);this.marker_.bindTo("position",this);this.circle_.bindTo("center",this,"position");this.circle_.bindTo("radius",this,"accuracy")}this.accuracy!=a.coords.accuracy&&google.maps.MVCObject.prototype.set.call(this,"accuracy",a.coords.accuracy);!c&&null!=this.position&&this.position.equals(b)||google.maps.MVCObject.prototype.set.call(this,"position",b)};p.prototype.watchPosition_=function(){var a=this;navigator.geolocation&&(this.watchId_=navigator.geolocation.watchPosition(function(b){a.updatePosition_(b)},
    function(b){google.maps.event.trigger(a,"geolocation_error",b)},this.getPositionOptions()))};p.prototype.copyOptions_=function(a,b){for(var c in b)!0!==p.DISALLOWED_OPTIONS[c]&&(a[c]=b[c]);return a};p.DISALLOWED_OPTIONS={map:!0,position:!0,radius:!0};return{init:function(a,b,c,e){H=e;s=a;n=s.getDiv().id;W=b;M=c;google.maps.event.addListener(s,"click",function(){T()});w=[];G=[];N=5;B=L=J=K=null;S=R=!1;U=new google.maps.Geocoder;x=new google.maps.LatLngBounds;C=new google.maps.InfoWindow;X=new google.maps.StreetViewService;
    Y=new google.maps.DirectionsService;rendererOptions={draggable:!0};I=new google.maps.DirectionsRenderer(rendererOptions);I.setPanel(document.getElementById("rendered-directions-placeholder-"+n))},setGeoLocationIfEnabled:function(a){"true"===a&&(u=new p,google.maps.event.addListenerOnce(u,"position_changed",function(){s.setCenter(this.getPosition());s.fitBounds(this.getBounds())}),google.maps.event.addListener(u,"geolocation_error",function(a){alert("There was an error creating Geolocation marker: "+
    a.message+"\n\nProceeding with normal map generation..");k.error("There was an error obtaining your position. Message: "+a.message);u=null}),u.setPositionOptions({enableHighAccuracy:!0,timeout:6E3,maximumAge:0}),u.setMap(s))},buildAddressMarkers:function(a,c,g){S=!0;J=z.trim(a);J=z.searchReplace(J,"'","");"true"===c?(V=!0,a=E(J),"true"===g?f(a,!0):"false"===g&&f(a,!1)):null!=c&&"false"!==c||b(J,"","","",!1,!1);t();e()},isBuildAddressMarkersCalled:function(){return S}}},z=function(){return{isNumeric:function(a){return/^([0-9?(\-.,;\s{1,})]+)$/.test(a)},
    isAlphaNumeric:function(a){return/^([a-zA-Z0-9?(/\-.,\s{1,})]+)$/.test(a)},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},searchReplace:function(a,c,f){return a.replace(RegExp(c,"g"),f)}}}(),k=function(){var a=function(a){navigator.userAgent.match(/msie|trident/i)||console.log(a)};return{info:function(c){a("Info :: "+c)},raw:function(c){a(c)},warn:function(c){a("Warning :: "+c)},error:function(c){a("Error :: "+c)},fatal:function(c){a("Fatal :: "+c)}}}(),F=function(){return{alertError:function(c){function k(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         c){b.preventDefault();var e=a(c).closest("div.cgmp-popup-shortcode-dialog");e&&a(e).remove();0==a("div.cgmp-popup-shortcode-dialog").length&&a("#cgmp-popup-mask").remove()}var f=a('<div id="cgmp-popup-mask"/>'),b=Math.random().toString(36).substring(3),l=a('<div id="'+b+'" class="cgmp-popup-shortcode-dialog cgmp-popup-window">');l.html("<div class='dismiss-container'><a class='dialog-dismiss' href='javascript:void(0)'>x</a></div><p style='text-align: left; padding: 10px 10px 0 10px'>"+c+"</p><div align='center'><input type='button' class='close-dialog' value='Close' /></div>");
    a("body").append(f);a("body").append(l);c=a(document).height();f=a(window).width();a("#cgmp-popup-mask").css({width:f,height:c,opacity:0.1});1==a("#cgmp-popup-mask").length&&a("#cgmp-popup-mask").show();c=a(window).height();f=a(window).width();a("div#"+b).css("top",c/2-a("div#"+b).height()/2);a("div#"+b).css("left",f/2-a("div#"+b).width()/2);a("div#"+b).fadeIn(500);a(".cgmp-popup-window .close-dialog").click(function(b){k(b,a(this))});a(".cgmp-popup-window .dialog-dismiss").click(function(b){k(b,
        a(this))});a("#cgmp-popup-mask").click(function(){a(this).remove();a(".cgmp-popup-window").remove()});a(window).resize(function(){var b=a(".window"),c=a(document).height(),e=a(window).width();a("#cgmp-popup-mask").css({width:e,height:c});c=a(window).height();e=a(window).width();b.css("top",c/2-b.height()/2);b.css("left",e/2-b.width()/2)})}}}();if(0==a("object#global-data-placeholder").length)k.fatal("The global HTML <object> element is undefined. Aborting map generation .. d[-_-]b");else{v=document.head||
    document.getElementsByTagName("head")[0]||document.documentElement;t=document.createElement("link");t.type="text/css";t.rel="stylesheet";t.href=a("object#global-data-placeholder").find("param#cssHref").val();t.media="screen";v.appendChild(t);c.sep=a("object#global-data-placeholder").find("param#sep").val();c.noBubbleDescriptionProvided=a("object#global-data-placeholder").find("param#noBubbleDescriptionProvided").val();c.customMarkersUri=a("object#global-data-placeholder").find("param#customMarkersUri").val();
    c.errors=a("object#global-data-placeholder").find("param#errors").val();c.geoValidationClientRevalidate=a("object#global-data-placeholder").find("param#geoValidationClientRevalidate").val();c.ajaxurl=a("object#global-data-placeholder").find("param#ajaxurl").val();c.errors=E(c.errors);c.translations=a("object#global-data-placeholder").find("param#translations").val();c.translations=E(c.translations);v=parseFloat(a.fn.jquery.split(".")[0]);t=parseFloat(a.fn.jquery.split(".")[1]);if(1>v||1<=v&&2>v&&
        3>t)return alert(c.errors.oldJquery),k.fatal("Client uses jQuery older than the version 1.3.0. Aborting map generation .."),!1;if("undefined"===typeof google||!google)return F.alertError(c.errors.msgNoGoogle),k.fatal("We do not have reference to Google API. Aborting map generation .."),!1;if("undefined"!==typeof GMap2&&GMap2)return F.alertError(c.errors.msgApiV2),k.fatal("It looks like the webpage has reference to GMap2 object from Google API v2. Aborting map generation .."),!1;c.language=a("object#global-data-placeholder").find("param#language").val();
    google.load("maps","3",{other_params:"sensor=false&libraries=panoramio&language="+c.language,callback:function(){m()}})}})("undefined"!==typeof m&&null!=m&&m?m:jQuery)}if("undefined"===typeof jQuery||null==jQuery){var O=!1,y=document.head||document.getElementsByTagName("head")[0]||document.documentElement,m=document.createElement("script");m.type="text/javascript";m.src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";m.onload=m.onreadystatechange=function(){if(!O&&(!this.readyState||
    /loaded|complete/.test(m.readyState))){O=!0;var Z=jQuery.noConflict();D(Z);m.onload=m.onreadystatechange=null;y&&m.parentNode&&y.removeChild(m);m=void 0}};y.appendChild(m)}else D()})();