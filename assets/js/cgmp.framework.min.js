(function(){function D(m){(function(a){function m(){a("object.cgmp-json-string-placeholder").each(function(f,q){var d=a(q).attr("id"),d=a(q).find("param#json-string-"+d).val(),d=z.searchReplace(d,"'",""),d=d.replace("&quot;",""),b=E(d);if("undefined"===typeof b||!b)return h.fatal("We did not parse JSON from OBJECT param. Aborting map generation .."),!1;if(0<a("div#"+b.id).length){var k=new google.maps.Map(document.getElementById(b.id));y.initMap(k,b.bubbleautopan,parseInt(b.zoom),b.maptype);A.init(k);
    d=new D;d.init(k,b.bubbleautopan,b.distanceunits,b);d.setGeoLocationIfEnabled(b.enablegeolocationmarker);y.setMapControls({mapTypeControl:"true"===b.maptypecontrol,panControl:"true"===b.pancontrol,zoomControl:"true"===b.zoomcontrol,scaleControl:"true"===b.scalecontrol,scrollwheel:"true"===b.scrollwheelcontrol,streetViewControl:"true"===b.streetviewcontrol,tilt:"true"===b.tiltfourtyfive?45:null,draggable:"true"===b.draggable,overviewMapControl:!0,overviewMapControlOptions:{opened:!1}});"true"===b.showpanoramio&&
    A.buildPanoramioLayer(b.panoramiouid);"true"===b.showbike&&A.buildBikeLayer();"true"===b.showtraffic&&A.buildTrafficLayer();null!=b.kml&&""!=z.trim(b.kml)?A.buildKmlLayer(b.kml):(null!=b.markerlist&&""!=z.trim(b.markerlist)&&d.buildAddressMarkers(b.markerlist,b.addmarkermashup,b.addmarkermashupbubble),d.isBuildAddressMarkersCalled()||F.alertError(c.errors.msgMissingMarkers));a(document).ready(function(){function c(){null!=q&&clearTimeout(q);a(d).is(":hidden")?q=setTimeout(c,f):setTimeout(function(){var a=
        k;if(a){var c=a.getZoom(),b=a.getBounds(),q=a.getCenter();google.maps.event.trigger(a,"resize");a.setZoom(c);a.setCenter(q);a.getBounds(b)}},f)}var q=null,f=500,d="div#"+b.id;a(d).is(":hidden")?(h.warn("Map placeholder DIV is hidden, must resize the map!"),c()):setTimeout(function(){c()},4*f)})}else h.fatal("It looks like the map DIV placeholder ID ["+b.id+"] does not exist in the page!")})}var E=function(a){},v=parseFloat(a.fn.jquery.split(".")[0]),t=parseFloat(a.fn.jquery.split(".")[1]);1<=v&&2>
    v&&4<=t?E=a.parseJSON:window.JSON&&window.JSON.parse?E=window.JSON.parse:h.fatal("Using parseJson stub..");var c={},y=function(){var a={};return{initMap:function(c,h,b,k){a=c;c=[];for(var $ in google.maps.MapTypeId)c.push(google.maps.MapTypeId[$]);"OSM"==k?(c.push(k),a.mapTypes.set(k,new google.maps.ImageMapType({getTileUrl:function(a,c){return"http://tile.openstreetmap.org/"+c+"/"+a.x+"/"+a.y+".png"},tileSize:new google.maps.Size(256,256),name:"OpenStreet",maxZoom:20}))):"ROADMAP"==k?k=google.maps.MapTypeId.ROADMAP:
    "SATELLITE"==k?k=google.maps.MapTypeId.SATELLITE:"HYBRID"==k?k=google.maps.MapTypeId.HYBRID:"TERRAIN"==k&&(k=google.maps.MapTypeId.TERRAIN);a.setOptions({zoom:b,mapTypeId:k,mapTypeControlOptions:{mapTypeIds:c}})},setMapControls:function(c){a.setOptions(c)}}}(),A=function(){var a={};return{init:function(c){a=c},buildKmlLayer:function(q){if(0>q.toLowerCase().indexOf("http"))return h.error("KML URL must start with HTTP(S). Aborting.."),!1;var d=new google.maps.KmlLayer(q);google.maps.event.addListener(d,
    "status_changed",function(){var a=d.getStatus();if(a!=google.maps.KmlLayerStatus.OK){var k="";switch(a){case google.maps.KmlLayerStatus.DOCUMENT_NOT_FOUND:k=c.errors.kmlNotFound;break;case google.maps.KmlLayerStatus.DOCUMENT_TOO_LARGE:k=c.errors.kmlTooLarge;break;case google.maps.KmlLayerStatus.FETCH_ERROR:k=c.errors.kmlFetchError;break;case google.maps.KmlLayerStatus.INVALID_DOCUMENT:k=c.errors.kmlDocInvalid;break;case google.maps.KmlLayerStatus.INVALID_REQUEST:k=c.errors.kmlRequestInvalid;break;
        case google.maps.KmlLayerStatus.LIMITS_EXCEEDED:k=c.errors.kmlLimits;break;case google.maps.KmlLayerStatus.TIMED_OUT:k=c.errors.kmlTimedOut;break;case google.maps.KmlLayerStatus.UNKNOWN:k=c.errors.kmlUnknown}if(""!=k){var q=c.errors.kml.replace("[MSG]",k),q=q.replace("[STATUS]",a);F.alertError(q);h.error("Google returned KML error: "+k+" ("+a+")");h.error("KML file: "+d.getUrl())}}});google.maps.event.addListener(d,"defaultviewport_changed",function(){});d.setMap(a)},buildTrafficLayer:function(){(new google.maps.TrafficLayer).setMap(a)},
    buildBikeLayer:function(){(new google.maps.BicyclingLayer).setMap(a)},buildPanoramioLayer:function(c){if("undefined"===typeof google.maps.panoramio||!google.maps.panoramio||null==google.maps.panoramio)return h.error("We cannot access Panoramio library. Aborting.."),!1;var d=new google.maps.panoramio.PanoramioLayer;d?(null!=c&&""!=c&&d.setUserId(c),d.setMap(a)):h.error("Could not instantiate Panoramio object. Aborting..")}}}(),D=function(){function f(){clearTimeout(K);if(0<G.length){var e=G.shift();
    h.info("Geocoding '"+e.address+"' Left "+G.length+" items to geocode..");U.geocode({address:e.address},function(a,l){q(a,l,e)})}else{t();if(P){h.warn("Reset server map data cache required");if(V){a.each(w,function(e,l){var g=(l.position+"").replace(RegExp("\\(|\\)","g"),"");a.each(Q,function(a,e){if(a===l.content&&-1!=e.validated_address_csv_data.indexOf(c.geoValidationClientRevalidate))return e.validated_address_csv_data=e.validated_address_csv_data.replace(RegExp(c.geoValidationClientRevalidate,
    "g"),g),!1})});var g=JSON.stringify(Q);a.post(c.ajaxurl,{action:"cgmp_ajax_cache_map_action",data:g,geoMashup:"true"},function(a){h.info("Posting map data to the server..");null!=a&&"OK"===a&&h.info("Map geo mashup cache was reset on the server")})}else{var l=H.markerlist.split("|"),p=H.debug.widget_id,b=H.debug.post_id,g=H.debug.post_type,d=H.debug.shortcodeid,k=[];a.each(w,function(e,g){var p=(g.position+"").replace(RegExp("\\(|\\)","g"),"");a.each(l,function(a,e){if(e.split(c.sep)[0]===g.content&&
    -1!=e.indexOf(c.geoValidationClientRevalidate))return k[a]=e.replace(RegExp(c.geoValidationClientRevalidate,"g"),p),!1})});var f=k.join("|");"undefined"!==typeof p&&"undefined"!==p?a.post(c.ajaxurl,{action:"cgmp_ajax_cache_map_action",data:f,geoMashup:"false",widgetId:p},function(a){h.info("Posting map data to the server..");null!=a&&"OK_WIDGET"===a&&h.info("Map cache was reset on the server for widget#"+p)}):"undefined"!==typeof b&&"undefined"!==b&&a.post(c.ajaxurl,{action:"cgmp_ajax_cache_map_action",
    data:f,geoMashup:"false",postId:b,postType:g,shortcodeId:d},function(a){h.info("Posting map data to the server..");null!=a&&("OK_POST"===a?h.info("Map cache was reset on the server for post#"+b+" shortcode#"+d):"OK_PAGE"===a&&h.info("Map cache was reset on the server for page#"+b+" shortcode#"+d))})}P=!1}h.info("Have "+w.length+" markers on the map")}}function q(a,g,l){g==google.maps.GeocoderStatus.OK?(h.info("Geocoding '"+l.address+"' OK!"),k(a[0].geometry.location,l),K=setTimeout(function(){f()},
    300)):g==google.maps.GeocoderStatus.OVER_QUERY_LIMIT?(t(),G.push(l),K=setTimeout(function(){f()},3E3)):g==google.maps.GeocoderStatus.ZERO_RESULTS&&(h.warn("Got ZERO_RESULTS for ["+l.address+"]"),K=setTimeout(function(){f()},300))}function d(e,g){var l=1;Q=e;a.each(e,function(a,e){if("live_debug"===a||"debug"===a)return!0;null==this.excerpt&&(this.excerpt="");"undefined"!==typeof this.validated_address_csv_data&&""!==this.validated_address_csv_data||h.error("Validated address from: "+this.permalink+
    " returned empty, perhaps OVER_QUERY_LIMIT when validating on the server..");b(this.validated_address_csv_data,this.title,this.permalink,this.excerpt,g,!0);l++})}function b(a,g,l,p,b,d){if("undefined"===typeof a||""===a)h.fatal("Not parsing empty validated address csv data.. Skipping");else{a=a.split("|");h.info("Raw: "+a);for(var q=0;q<a.length;q++){var f=a[q];if(null!=f&&""!=f){var f=f.split(c.sep),n=f[0],m=f[1],r=f[2],f=f[3];-1!=r.indexOf(c.noBubbleDescriptionProvided)&&(r="");n={address:n,animation:google.maps.Animation.DROP,
    zIndex:q+1,markerIcon:m,customBubbleText:r,markerHoverText:r+" ("+n+")",postTitle:g,postLink:l,postExcerpt:p,infoBubbleContainPostLink:b,geoMashup:d};if(f===c.geoValidationClientRevalidate)P=!0,G.push(n);else{m=[];-1!=f.indexOf(",")?m=f.split(","):-1!=f.indexOf(";")&&(m=f.split(";"));m[0]=z.trim(m[0]);m[1]=z.trim(m[1]);if(""===m[0]||""===m[1])return h.warn("Lat or Long are empty string"),!1;f=new google.maps.LatLng(parseFloat(m[0]),parseFloat(m[1]));k(f,n)}}}}}function k(e,g){var l=new google.maps.Marker({position:e,
    title:g.markerHoverText,content:g.address,zIndex:g.zIndex+1E3,map:s});if(l){h.info("Built marker: "+g.address+" "+e);if(g.markerIcon){var p=g.markerIcon;if("undefined"==typeof p||"undefined"===p)p="1-default.png";l.setIcon(c.customMarkersUri+p);var b=null,b=["4-default.png","5-default.png","6-default.png","7-default.png"];-1!=a.inArray(p,["1-default.png","2-default.png"])?(p=c.customMarkersUri+"msmarker.shadow.png",b=m(p,59,32,0,0,16,33)):-1!=a.inArray(p,b)?(p=c.customMarkersUri+"msmarker.shadow.png",
    b=m(p,59,32,0,0,21,34)):-1!=p.indexOf("3-default")?(p=c.customMarkersUri+"beachflag_shadow.png",b=m(p,37,32,0,0,10,33)):b=m(c.customMarkersUri+"shadow.png",68,37,0,0,32,38);l.setShadow(b)}y(l,g);R||(F(),R=!0);w.push(l)}}function m(a,g,l,p,c,b,f){return new google.maps.MarkerImage(a,new google.maps.Size(g,l),new google.maps.Point(p,c),new google.maps.Point(b,f))}function t(){var e=!1,g=null==u?!1:!0;1<w.length?(a.each(w,function(a,e){x.contains(e.position)||x.extend(e.position)}),e=!0):1==w.length&&
    (g?(x.extend(w[0].position),e=!0):(s.setCenter(w[0].position),N=s.getZoom(),L=s.getCenter()));e&&(g&&null!=u.getPosition()&&(h.info("Extended bounds with Geo marker position: "+u.getPosition()),x.extend(u.getPosition())),B=x,null!=x&&s.fitBounds(x))}function T(){null!=B?s.getCenter()!=B.getCenter()&&(h.info("Panning map back to its original bounds center: "+B.getCenter()),s.fitBounds(B),s.setCenter(B.getCenter())):null!=L&&(h.info("Panning map back to its original center: "+L+" and updated zoom: "+
    N),s.setCenter(L),s.setZoom(N))}function v(e){a(e+" input#a_address").val("");a(e+" input#b_address").val("");a(e+" input#a_address").removeClass("d_error");a(e+" input#b_address").removeClass("d_error");a("input#"+n+"_avoid_hway").prop("checked",!1);a("input#"+n+"_avoid_tolls").prop("checked",!1);a("input#"+n+"_radio_km").prop("checked",!1);a("input#"+n+"_radio_miles").prop("checked",!0)}function y(e,g){var l=O(e.content,g),c="div#direction-controls-placeholder-"+n,b=a("div#rendered-directions-placeholder-"+
    n);google.maps.event.addListener(e,"click",function(){v(c);a(c).fadeOut();I.setMap(null);b.html("");b.hide();a(c+" button#print_sub").hide();D(e,l,c);A(e,l,c,b);C.setContent(l.bubbleContent);C.setOptions({disableAutoPan:"true"===W?!1:!0});C.open(s,this)})}function A(e,g,l,c){var b="div#bubble-"+g.bubbleHolderId,f=e.content,f=f.replace("Lat/Long: ",""),d=!1==(null==u?!1:!0)||null==u.getPosition()?"":u.getPosition();a(document).on("click",b+" a.dirToHereTrigger",function(){this.id==="toHere-"+g.bubbleHolderId&&
(a(l).fadeIn(),a(l+" input#a_address").val(d),a(l+" input#b_address").val(f),"miles"===M?(a("input#"+n+"_radio_miles").prop("checked",!0),a("input#"+n+"_radio_km").prop("checked",!1)):"km"===M&&(a("input#"+n+"_radio_km").prop("checked",!0),a("input#"+n+"_radio_miles").prop("checked",!1)))});a(document).on("click",b+" a.dirFromHereTrigger",function(){this.id==="fromHere-"+g.bubbleHolderId&&(a(l).fadeIn(),a(l+" input#a_address").val(f),a(l+" input#b_address").val(d),"miles"===M?(a("input#"+n+"_radio_miles").prop("checked",
    !0),a("input#"+n+"_radio_km").prop("checked",!1)):"km"===M&&(a("input#"+n+"_radio_km").prop("checked",!0),a("input#"+n+"_radio_miles").prop("checked",!1)))});a(document).on("click",l+" div.d_close-wrapper",function(e){v(l);a(this).parent().fadeOut();I.setMap(null);c.html("");c.hide();a(l+" button#print_sub").hide();T();return!1})}function D(e,g,l){X.getPanoramaByLocation(e.position,50,function(c,b){if(b===google.maps.StreetViewStatus.OK)a(document).on("click","a#trigger-"+g.bubbleHolderId,function(){var c=
{navigationControl:!0,enableCloseButton:!0,addressControl:!1,linksControl:!0,scrollwheel:!1,addressControlOptions:{position:google.maps.ControlPosition.BOTTOM},position:e.position,pov:{heading:165,pitch:0,zoom:1}},b=new google.maps.StreetViewPanorama(document.getElementById("bubble-"+g.bubbleHolderId),c);b.setVisible(!0);google.maps.event.addListener(C,"closeclick",function(){v(l);a(l).fadeOut();null!=b&&(b.unbind("position"),b.setVisible(!1));b=null});google.maps.event.addListener(b,"closeclick",
    function(){null!=b&&(b.unbind("position"),b.setVisible(!1),a("div#bubble-"+g.bubbleHolderId).css("background","none"));b=null})});else h.warn("There is not street view available for this marker location: "+e.position+" status: "+b),a(document).on("click","a#trigger-"+g.bubbleHolderId,function(a){a.preventDefault()}),a("a#trigger-"+g.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important"),google.maps.event.addListener(C,"domready",function(){a("a#trigger-"+g.bubbleHolderId).removeAttr("href");
    a("a#trigger-"+g.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important")})})}function F(){var e="div#direction-controls-placeholder-"+n,b=a("div#rendered-directions-placeholder-"+n);a(document).on("click",e+" a#reverse-btn",function(b){b=a(e+" input#a_address").val();var c=a(e+" input#b_address").val();a(e+" input#a_address").val(c);a(e+" input#b_address").val(b);return!1});a(document).on("click",e+" a#d_options_show",function(){a(e+" a#d_options_hide").show();a(e+
    " a#d_options_show").hide();a(e+" div#d_options").show();return!1});a(document).on("click",e+" a#d_options_hide",function(){a(e+" a#d_options_hide").hide();a(e+" a#d_options_show").show();a(e+" div#d_options").hide();a("input#"+n+"_avoid_hway").prop("checked",!1);a("input#"+n+"_avoid_tolls").prop("checked",!1);a("input#"+n+"_radio_km").prop("checked",!1);a("input#"+n+"_radio_miles").prop("checked",!0);return!1});a(document).on("click",e+" button#d_sub",function(){var c=a(e+" input#a_address").val(),
    p=a(e+" input#b_address").val(),f=!1;if(null==c||""==c)a(e+" input#a_address").addClass("d_error"),f=!0;if(null==p||""==p)a(e+" input#b_address").addClass("d_error"),f=!0;if(!f){a(e+" button#d_sub").prop("disabled",!0).html("Please wait..");var d=google.maps.DirectionsTravelMode.DRIVING;a(e+" a#dir_w_btn").hasClass("selected")&&(d=google.maps.DirectionsTravelMode.WALKING);var f=a("input#"+n+"_avoid_hway").is(":checked"),q=a("input#"+n+"_avoid_tolls").is(":checked"),k=a("input#"+n+"_radio_miles").is(":checked"),
    d={origin:c,destination:p,travelMode:d,provideRouteAlternatives:!0};f&&(d.avoidHighways=!0);q&&(d.avoidTolls=!0);d.unitSystem=k?google.maps.DirectionsUnitSystem.IMPERIAL:google.maps.DirectionsUnitSystem.METRIC;Y.route(d,function(f,d){d==google.maps.DirectionsStatus.OK?(b.html(""),b.show(),I.setMap(s),I.setDirections(f),a(e+" button#d_sub").removeAttr("disabled").html("Get directions"),a(e+" button#print_sub").fadeIn(),C.close()):(h.error('Could not route directions from "'+c+'" to "'+p+'", got result from Google: '+
    d),b.html("<span style='font-size: 12px; font-weight: bold; color: red'>Could not route directions from<br />'"+c+"' to<br />'"+p+"'<br />Got result from Google: ["+d+"]</span>"),a(e+" button#print_sub").hide(),a(e+" button#d_sub").removeAttr("disabled").html("Get directions"))})}});a(document).on("click",e+" button#print_sub",function(){var b=a(e+" input#a_address").val(),c=a(e+" input#b_address").val(),g="d";a(e+" a#dir_w_btn").hasClass("selected")&&(g="w");b="http://maps.google.com/?saddr="+b+
    "&daddr="+c+"&dirflg="+g+"&pw=2";b=a("input#"+n+"_radio_miles").is(":checked")?b+"&doflg=ptm":b+"&doflg=ptk";"d"===g&&(g=a("input#"+n+"_avoid_hway").is(":checked"),c=a("input#"+n+"_avoid_tolls").is(":checked"),g&&(b+="&dirflg=h"),c&&(b+="&dirflg=t"));window.open(b);return!1});a(document).on("change focus",e+" input#a_address",function(){a(e+" input#a_address").removeClass("d_error");return!1});a(document).on("change focus",e+" input#b_address",function(){a(e+" input#b_address").removeClass("d_error");
    return!1});a(document).on("click",e+" .kd-button",function(){var b=this.id;"dir_d_btn"==b?a(e+" a#dir_d_btn").hasClass("selected")?h.warn("Driving travel mode is already selected"):(a(e+" a#dir_d_btn").addClass("selected"),a(e+" a#dir_w_btn").removeClass("selected")):"dir_w_btn"==b&&(a(e+" a#dir_w_btn").hasClass("selected")?h.warn("Walking travel mode is already selected"):(a(e+" a#dir_w_btn").addClass("selected"),a(e+" a#dir_d_btn").removeClass("selected")));return!1})}function O(a,b){var f=Math.floor(111111*
    Math.random()),f=f+"-"+n,d="<div id='bubble-"+f+"' style='height: 130px !important; width: 300px !important;' class='bubble-content'>";if(!b.geoMashup||b.geoMashup&&!b.infoBubbleContainPostLink)d+="<h4>"+c.translations.address+":</h4>",d+="<p class='custom-bubble-text'>"+a+"</p>",""!=b.customBubbleText&&(d+="<p class='custom-bubble-text'>"+b.customBubbleText+"</p>");else var q=b.postTitle.substring(0,30),d=d+""+("<p class='geo-mashup-post-title'><a title='Original post: "+b.postTitle+"' href='"+b.postLink+
    "'>"+q+"..</a></p>"),d=d+("<p class='geo-mashup-post-excerpt'>"+b.postExcerpt+"</p>");d+="<div class='custom-bubble-links-section'>";d+="<hr />";d+="<p class='custom-bubble-text'>"+c.translations.directions+": <a id='toHere-"+f+"' class='dirToHereTrigger' href='javascript:void(0);'>"+c.translations.toHere+"</a> - <a id='fromHere-"+f+"' class='dirFromHereTrigger' href='javascript:void(0);'>"+c.translations.fromHere+"</a> | <a id='trigger-"+f+"' class='streetViewTrigger' href='javascript:void(0);'>"+
    c.translations.streetView+"</a></p>";d+="</div></div>";return{bubbleHolderId:f,bubbleContent:d}}function r(a,b,d){var f={clickable:!1,cursor:"pointer",draggable:!1,flat:!0,icon:{url:c.customMarkersUri+"gpsloc.png",size:new google.maps.Size(34,34),scaledSize:new google.maps.Size(17,17),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,8)},optimized:!1,position:new google.maps.LatLng(0,0),title:"Current location",zIndex:2};b&&(f=this.copyOptions_(f,b));b={clickable:!1,radius:0,strokeColor:"1bb6ff",
    strokeOpacity:0.4,fillColor:"61a0bf",fillOpacity:0.4,strokeWeight:1,zIndex:1};d&&(b=this.copyOptions_(b,d));this.marker_=new google.maps.Marker(f);this.circle_=new google.maps.Circle(b);this.map=this.position=this.accuracy=null;this.set("minimum_accuracy",null);this.set("position_options",{enableHighAccuracy:!0,maximumAge:1E3});this.circle_.bindTo("map",this.marker_);a&&this.setMap(a)}var w,G,M,S,K,R,s,J,W,B,L,N,n,U,x,C,X,I,Y,u=null,V=!1,P=!1,Q=[],H=[];r.prototype=new google.maps.MVCObject;r.prototype.set=
    function(a,b){if(/^(?:position|accuracy)$/i.test(a))throw"'"+a+"' is a read-only property.";/map/i.test(a)?this.setMap(b):google.maps.MVCObject.prototype.set.apply(this,arguments)};r.prototype.marker_=null;r.prototype.circle_=null;r.prototype.getMap=function(){return this.map};r.prototype.getPositionOptions=function(){return this.get("position_options")};r.prototype.setPositionOptions=function(a){this.set("position_options",a)};r.prototype.getPosition=function(){return this.position};r.prototype.getBounds=
    function(){return this.position?this.circle_.getBounds():null};r.prototype.getAccuracy=function(){return this.accuracy};r.prototype.getMinimumAccuracy=function(){return this.get("minimum_accuracy")};r.prototype.setMinimumAccuracy=function(a){this.set("minimum_accuracy",a)};r.prototype.watchId_=-1;r.prototype.setMap=function(a){this.map=a;this.notify("map");a?this.watchPosition_():(this.marker_.unbind("position"),this.circle_.unbind("center"),this.circle_.unbind("radius"),this.position=this.accuracy=
    null,navigator.geolocation.clearWatch(this.watchId_),this.watchId_=-1,this.marker_.setMap(a))};r.prototype.setMarkerOptions=function(a){this.marker_.setOptions(this.copyOptions_({},a))};r.prototype.setCircleOptions=function(a){this.circle_.setOptions(this.copyOptions_({},a))};r.prototype.updatePosition_=function(a){var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),c=null==this.marker_.getMap();if(c){if(null!=this.getMinimumAccuracy()&&a.coords.accuracy>this.getMinimumAccuracy())return;
    this.marker_.setMap(this.map);this.marker_.bindTo("position",this);this.circle_.bindTo("center",this,"position");this.circle_.bindTo("radius",this,"accuracy")}this.accuracy!=a.coords.accuracy&&google.maps.MVCObject.prototype.set.call(this,"accuracy",a.coords.accuracy);!c&&null!=this.position&&this.position.equals(b)||google.maps.MVCObject.prototype.set.call(this,"position",b)};r.prototype.watchPosition_=function(){var a=this;navigator.geolocation&&(this.watchId_=navigator.geolocation.watchPosition(function(b){a.updatePosition_(b)},
    function(b){google.maps.event.trigger(a,"geolocation_error",b)},this.getPositionOptions()))};r.prototype.copyOptions_=function(a,b){for(var c in b)!0!==r.DISALLOWED_OPTIONS[c]&&(a[c]=b[c]);return a};r.DISALLOWED_OPTIONS={map:!0,position:!0,radius:!0};return{init:function(a,b,c,d){H=d;s=a;n=s.getDiv().id;W=b;M=c;google.maps.event.addListener(s,"click",function(){T()});w=[];G=[];N=5;B=L=J=K=null;S=R=!1;U=new google.maps.Geocoder;x=new google.maps.LatLngBounds;C=new google.maps.InfoWindow;X=new google.maps.StreetViewService;
    Y=new google.maps.DirectionsService;rendererOptions={draggable:!0};I=new google.maps.DirectionsRenderer(rendererOptions);I.setPanel(document.getElementById("rendered-directions-placeholder-"+n))},setGeoLocationIfEnabled:function(a){"true"===a&&(u=new r,google.maps.event.addListenerOnce(u,"position_changed",function(){s.setCenter(this.getPosition());s.fitBounds(this.getBounds())}),google.maps.event.addListener(u,"geolocation_error",function(a){alert("There was an error creating Geolocation marker: "+
    a.message+"\n\nProceeding with normal map generation..");h.error("There was an error obtaining your position. Message: "+a.message);u=null}),u.setPositionOptions({enableHighAccuracy:!0,timeout:6E3,maximumAge:0}),u.setMap(s))},buildAddressMarkers:function(a,c,q){S=!0;J=z.trim(a);J=z.searchReplace(J,"'","");"true"===c?(V=!0,a=E(J),"true"===q?d(a,!0):"false"===q&&d(a,!1)):null!=c&&"false"!==c||b(J,"","","",!1,!1);t();f()},isBuildAddressMarkersCalled:function(){return S}}},z=function(){return{isNumeric:function(a){return/^([0-9?(\-.,;\s{1,})]+)$/.test(a)},
    isAlphaNumeric:function(a){return/^([a-zA-Z0-9?(/\-.,\s{1,})]+)$/.test(a)},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},searchReplace:function(a,c,d){return a.replace(RegExp(c,"g"),d)}}}(),h=function(){var a=function(a){navigator.userAgent.match(/msie|trident/i)||console.log(a)};return{info:function(c){a("Info :: "+c)},raw:function(c){a(c)},warn:function(c){a("Warning :: "+c)},error:function(c){a("Error :: "+c)},fatal:function(c){a("Fatal :: "+c)}}}(),F=function(){return{alertError:function(c){function h(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         c){b.preventDefault();var d=a(c).closest("div.cgmp-popup-shortcode-dialog");d&&a(d).remove();0==a("div.cgmp-popup-shortcode-dialog").length&&a("#cgmp-popup-mask").remove()}var d=a('<div id="cgmp-popup-mask"/>'),b=Math.random().toString(36).substring(3),k=a('<div id="'+b+'" class="cgmp-popup-shortcode-dialog cgmp-popup-window">');k.html("<div class='dismiss-container'><a class='dialog-dismiss' href='javascript:void(0)'>x</a></div><p style='text-align: left; padding: 10px 10px 0 10px'>"+c+"</p><div align='center'><input type='button' class='close-dialog' value='Close' /></div>");
    a("body").append(d);a("body").append(k);c=a(document).height();d=a(window).width();a("#cgmp-popup-mask").css({width:d,height:c,opacity:0.1});1==a("#cgmp-popup-mask").length&&a("#cgmp-popup-mask").show();c=a(window).height();d=a(window).width();a("div#"+b).css("top",c/2-a("div#"+b).height()/2);a("div#"+b).css("left",d/2-a("div#"+b).width()/2);a("div#"+b).fadeIn(500);a(".cgmp-popup-window .close-dialog").click(function(b){h(b,a(this))});a(".cgmp-popup-window .dialog-dismiss").click(function(b){h(b,
        a(this))});a("#cgmp-popup-mask").click(function(){a(this).remove();a(".cgmp-popup-window").remove()});a(window).resize(function(){var b=a(".window"),c=a(document).height(),d=a(window).width();a("#cgmp-popup-mask").css({width:d,height:c});c=a(window).height();d=a(window).width();b.css("top",c/2-b.height()/2);b.css("left",d/2-b.width()/2)})}}}();if(0==a("object#global-data-placeholder").length)h.fatal("The global HTML <object> element is undefined. Aborting map generation .. d[-_-]b");else{v=document.head||
    document.getElementsByTagName("head")[0]||document.documentElement;t=document.createElement("link");t.type="text/css";t.rel="stylesheet";t.href=a("object#global-data-placeholder").find("param#cssHref").val();t.media="screen";v.appendChild(t);c.sep=a("object#global-data-placeholder").find("param#sep").val();c.noBubbleDescriptionProvided=a("object#global-data-placeholder").find("param#noBubbleDescriptionProvided").val();c.customMarkersUri=a("object#global-data-placeholder").find("param#customMarkersUri").val();
    c.errors=a("object#global-data-placeholder").find("param#errors").val();c.geoValidationClientRevalidate=a("object#global-data-placeholder").find("param#geoValidationClientRevalidate").val();c.ajaxurl=a("object#global-data-placeholder").find("param#ajaxurl").val();c.errors=E(c.errors);c.translations=a("object#global-data-placeholder").find("param#translations").val();c.translations=E(c.translations);v=parseFloat(a.fn.jquery.split(".")[0]);t=parseFloat(a.fn.jquery.split(".")[1]);if(1>v||1<=v&&2>v&&
        3>t)return alert(c.errors.oldJquery),h.fatal("Client uses jQuery older than the version 1.3.0. Aborting map generation .."),!1;if("undefined"===typeof google||!google)return F.alertError(c.errors.msgNoGoogle),h.fatal("We do not have reference to Google API. Aborting map generation .."),!1;if("undefined"!==typeof GMap2&&GMap2)return F.alertError(c.errors.msgApiV2),h.fatal("It looks like the webpage has reference to GMap2 object from Google API v2. Aborting map generation .."),!1;c.language=a("object#global-data-placeholder").find("param#language").val();
    google.load("maps","3",{other_params:"sensor=false&libraries=panoramio&language="+c.language,callback:function(){m()}})}})("undefined"!==typeof m&&null!=m&&m?m:jQuery)}if("undefined"===typeof jQuery||null==jQuery){var O=!1,y=document.head||document.getElementsByTagName("head")[0]||document.documentElement,m=document.createElement("script");m.type="text/javascript";m.src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";m.onload=m.onreadystatechange=function(){if(!O&&(!this.readyState||
    /loaded|complete/.test(m.readyState))){O=!0;var Z=jQuery.noConflict();D(Z);m.onload=m.onreadystatechange=null;y&&m.parentNode&&y.removeChild(m);m=void 0}};y.appendChild(m)}else D()})();