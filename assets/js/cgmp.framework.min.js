(function(){function C(l){(function(a){function l(){a("object.cgmp-json-string-placeholder").each(function(k,n){var e=a(n).attr("id"),e=a(n).find("param#json-string-"+e).val(),e=y.searchReplace(e,"'",""),e=e.replace("&quot;",""),b=N(e);if("undefined"===typeof b||!b)return f.fatal("We did not parse JSON from OBJECT param. Aborting map generation .."),!1;if(0<a("div#"+b.id).length){var h=navigator.userAgent,e=document.getElementById(b.id);h.match(/Android|BlackBerry|IEMobile|i(Phone|Pad|Pod)|Kindle|MeeGo|NetFront|Nokia|Opera M(ob|in)i|Pie|PalmOS|PDA|Polaris|Plucker|Samsung|SonyEricsson|SymbianOS|UP.Browser|Vodafone|webOS|Windows Phone/i)&&
(e.style.width="100%",h=a(window).height()+"",-1!=h.indexOf("px")?e.style.height=h:-1!=h.indexOf("%")?e.style.height="100%":e.style.height=h+"px");var D=new google.maps.Map(e);x.initMap(D,b.bubbleautopan,parseInt(b.zoom),b.maptype);z.init(D);e=new C;e.init(D,b.bubbleautopan,b.distanceunits,b);e.setGeoLocationIfEnabled(b.enablegeolocationmarker);x.setMapControls({mapTypeControl:"true"===b.maptypecontrol,panControl:"true"===b.pancontrol,zoomControl:"true"===b.zoomcontrol,scaleControl:"true"===b.scalecontrol,
    scrollwheel:"true"===b.scrollwheelcontrol,streetViewControl:"true"===b.streetviewcontrol,tilt:"true"===b.tiltfourtyfive?45:null,draggable:"true"===b.draggable,overviewMapControl:!0,overviewMapControlOptions:{opened:!1}});"true"===b.showpanoramio&&z.buildPanoramioLayer(b.panoramiouid);"true"===b.showbike&&z.buildBikeLayer();"true"===b.showtraffic&&z.buildTrafficLayer();null!=b.kml&&""!=y.trim(b.kml)?z.buildKmlLayer(b.kml):(null!=b.markerlist&&""!=y.trim(b.markerlist)&&e.buildAddressMarkers(b.markerlist,
    b.addmarkermashup,b.addmarkermashupbubble),e.isBuildAddressMarkersCalled()||E.alertError(CGMPGlobal.msgMissingMarkers));a(document).ready(function(){function e(){null!=k&&clearTimeout(k);k=a(l).is(":hidden")?setTimeout(e,h):setTimeout(function(){n(D)},h)}function n(a){null!=k&&clearTimeout(k);a&&(google.maps.event.trigger(a,"resize"),k=setTimeout(function(){null!=k&&clearTimeout(k);a&&google.maps.event.trigger(a,"click")},h/2))}var k=null,h=500,l="div#"+b.id;a(l).is(":hidden")?(f.warn("Map placeholder DIV is hidden, must resize the map!"),
    e()):k=setTimeout(function(){e()},3*h)})}else f.fatal("It looks like the map DIV placeholder ID ["+b.id+"] does not exist in the page!")})}var N=function(a){},u=parseFloat(a.fn.jquery.split(".")[0]),t=parseFloat(a.fn.jquery.split(".")[1]);1<=u&&2>u&&4<=t?N=a.parseJSON:window.JSON&&window.JSON.parse?N=window.JSON.parse:f.fatal("Using parseJson stub..");var x=function(){var a={};return{initMap:function(f,e,b,h){a=f;f=[];for(var D in google.maps.MapTypeId)f.push(google.maps.MapTypeId[D]);"OSM"==h?(f.push(h),
        a.mapTypes.set(h,new google.maps.ImageMapType({getTileUrl:function(a,b){return"http://tile.openstreetmap.org/"+b+"/"+a.x+"/"+a.y+".png"},tileSize:new google.maps.Size(256,256),name:"OpenStreet",maxZoom:20}))):"ROADMAP"==h?h=google.maps.MapTypeId.ROADMAP:"SATELLITE"==h?h=google.maps.MapTypeId.SATELLITE:"HYBRID"==h?h=google.maps.MapTypeId.HYBRID:"TERRAIN"==h&&(h=google.maps.MapTypeId.TERRAIN);a.setOptions({zoom:b,mapTypeId:h,mapTypeControlOptions:{mapTypeIds:f}})},setMapControls:function(f){a.setOptions(f)}}}(),
    z=function(){var a={};return{init:function(f){a=f},buildKmlLayer:function(n){if(0>n.toLowerCase().indexOf("http"))return f.error("KML URL must start with HTTP(S). Aborting.."),!1;var e=new google.maps.KmlLayer(n);google.maps.event.addListener(e,"status_changed",function(){var a=e.getStatus();if(a!=google.maps.KmlLayerStatus.OK){var h="";switch(a){case google.maps.KmlLayerStatus.DOCUMENT_NOT_FOUND:h=CGMPGlobal.kmlNotFound;break;case google.maps.KmlLayerStatus.DOCUMENT_TOO_LARGE:h=CGMPGlobal.kmlTooLarge;
        break;case google.maps.KmlLayerStatus.FETCH_ERROR:h=CGMPGlobal.kmlFetchError;break;case google.maps.KmlLayerStatus.INVALID_DOCUMENT:h=CGMPGlobal.kmlDocInvalid;break;case google.maps.KmlLayerStatus.INVALID_REQUEST:h=CGMPGlobal.kmlRequestInvalid;break;case google.maps.KmlLayerStatus.LIMITS_EXCEEDED:h=CGMPGlobal.kmlLimits;break;case google.maps.KmlLayerStatus.TIMED_OUT:h=CGMPGlobal.kmlTimedOut;break;case google.maps.KmlLayerStatus.UNKNOWN:h=CGMPGlobal.kmlUnknown}if(""!=h){var k=CGMPGlobal.kml.replace("[MSG]",
        h),k=k.replace("[STATUS]",a);E.alertError(k);f.error("Google returned KML error: "+h+" ("+a+")");f.error("KML file: "+e.getUrl())}}});google.maps.event.addListener(e,"defaultviewport_changed",function(){});e.setMap(a)},buildTrafficLayer:function(){(new google.maps.TrafficLayer).setMap(a)},buildBikeLayer:function(){(new google.maps.BicyclingLayer).setMap(a)},buildPanoramioLayer:function(n){if("undefined"===typeof google.maps.panoramio||!google.maps.panoramio||null==google.maps.panoramio)return f.error("We cannot access Panoramio library. Aborting.."),
        !1;var e=new google.maps.panoramio.PanoramioLayer;e?(null!=n&&""!=n&&e.setUserId(n),e.setMap(a)):f.error("Could not instantiate Panoramio object. Aborting..")}}}(),C=function(){function k(){clearTimeout(J);if(0<F.length){var d=F.shift();f.info("Geocoding '"+d.address+"' Left "+F.length+" items to geocode..");U.geocode({address:d.address},function(a,c){n(a,c,d)})}else{l();if(Q){f.warn("Reset server map data cache required");if(V){a.each(v,function(d,c){var g=(c.position+"").replace(RegExp("\\(|\\)",
        "g"),"");a.each(R,function(a,d){if(a===c.content&&-1!=d.validated_address_csv_data.indexOf(CGMPGlobal.geoValidationClientRevalidate))return d.validated_address_csv_data=d.validated_address_csv_data.replace(RegExp(CGMPGlobal.geoValidationClientRevalidate,"g"),g),!1})});var g=JSON.stringify(R);a.post(CGMPGlobal.ajaxurl,{action:CGMPGlobal.ajaxCacheMapAction,data:g,geoMashup:"true",timestamp:CGMPGlobal.timestamp},function(a){f.info("Posting map data to the server..");null!=a&&"OK"===a&&f.info("Map geo mashup cache was reset on the server")})}else{var c=
        G.markerlist.split("|"),p=G.debug.widget_id,b=G.debug.post_id,e=G.debug.post_type,h=G.debug.shortcodeid,k=[];a.each(v,function(d,g){var p=(g.position+"").replace(RegExp("\\(|\\)","g"),"");a.each(c,function(a,c){var b=c.split(CGMPGlobal.sep);if(b[0]===g.content)return f.info(b[0]+" matched "+g.content+" (marker#"+(d+1)+")"),-1!=c.indexOf(CGMPGlobal.geoValidationClientRevalidate)?k[d]=c.replace(RegExp(CGMPGlobal.geoValidationClientRevalidate,"g"),p):k[d]=c,!1})});g=k.join("|");"undefined"!==typeof p&&
        "undefined"!==p?a.post(CGMPGlobal.ajaxurl,{action:CGMPGlobal.ajaxCacheMapAction,data:g,geoMashup:"false",widgetId:p,timestamp:CGMPGlobal.timestamp},function(a){f.info("Posting map data to the server..");null!=a&&"OK_WIDGET"===a&&f.info("Map cache was reset on the server for widget#"+p)}):"undefined"!==typeof b&&"undefined"!==b&&a.post(CGMPGlobal.ajaxurl,{action:CGMPGlobal.ajaxCacheMapAction,data:g,geoMashup:"false",postId:b,postType:e,shortcodeId:h,timestamp:CGMPGlobal.timestamp},function(a){f.info("Posting map data to the server..");
        null!=a&&("OK_POST"===a?f.info("Map cache was reset on the server for post#"+b+" shortcode#"+h):"OK_PAGE"===a?f.info("Map cache was reset on the server for page#"+b+" shortcode#"+h):"OK_CUSTOM"===a&&f.info("Map cache was reset on the server for type "+e+"#"+b+" shortcode#"+h))})}Q=!1}f.info("Have "+v.length+" markers on the map")}}function n(a,g,c){g==google.maps.GeocoderStatus.OK?(f.info("Geocoding '"+c.address+"' OK!"),h(a[0].geometry.location,c),J=setTimeout(function(){k()},200)):g==google.maps.GeocoderStatus.OVER_QUERY_LIMIT?
        (f.warn("Geocoding '"+c.address+"' OVER_QUERY_LIMIT!"),l(),F.push(c),J=setTimeout(function(){k()},2200)):(g==google.maps.GeocoderStatus.ZERO_RESULTS?f.warn("Geocoding '"+c.address+"' ZERO_RESULTS!"):f.warn("Geocoding '"+c.address+"' "+g+"!"),J=setTimeout(function(){k()},200))}function e(d,g){var c=1;R=d;a.each(d,function(a,d){if("live_debug"===a||"debug"===a)return!0;null==this.excerpt&&(this.excerpt="");"undefined"!==typeof this.validated_address_csv_data&&""!==this.validated_address_csv_data||f.error("Validated address from: "+
        this.permalink+" returned empty, perhaps OVER_QUERY_LIMIT when validating on the server..");b(this.validated_address_csv_data,this.title,this.permalink,this.excerpt,g,!0);c++})}function b(a,g,c,p,b,e){if("undefined"===typeof a||""===a)f.fatal("Not parsing empty validated address csv data.. Skipping");else{f.info("Raw: "+a);a=a.split("|");for(var k=0;k<a.length;k++){var n=a[k];if(null!=n&&""!=n){var n=n.split(CGMPGlobal.sep),m=n[0],l=n[1],q=n[2],n=n[3];-1!=q.indexOf(CGMPGlobal.noBubbleDescriptionProvided)&&
    (q="");m={address:m,animation:google.maps.Animation.DROP,zIndex:k+1,markerIcon:l,customBubbleText:q,markerHoverText:q+" ("+m+")",postTitle:g,postLink:c,postExcerpt:p,infoBubbleContainPostLink:b,geoMashup:e};if(n===CGMPGlobal.geoValidationClientRevalidate)Q=!0,F.push(m);else{l=[];-1!=n.indexOf(",")?l=n.split(","):-1!=n.indexOf(";")&&(l=n.split(";"));l[0]=y.trim(l[0]);l[1]=y.trim(l[1]);if(""===l[0]||""===l[1])return f.warn("Lat or Long are empty string"),!1;n=new google.maps.LatLng(parseFloat(l[0]),
        parseFloat(l[1]));h(n,m)}}}}}function h(a,g){var c=new google.maps.Marker({position:a,title:g.markerHoverText,content:g.address,zIndex:g.zIndex+1E3,map:r});if(c){f.info("Built marker: "+g.address+" "+a);if(g.markerIcon){var p=g.markerIcon;if("undefined"==typeof p||"undefined"===p)p="1-default.png";"1-default.png"!==p&&c.setIcon(CGMPGlobal.customMarkersUri+p)}u(c,g);S||(C(),S=!0);v.push(c)}}function l(){var d=!1,g=null==s?!1:!0;1<v.length?(a.each(v,function(a,d){w.contains(d.position)||w.extend(d.position)}),
        d=!0):1==v.length&&(g?(w.extend(v[0].position),d=!0):(r.setCenter(v[0].position),O=r.getZoom(),K=r.getCenter()));d&&(g&&null!=s.getPosition()&&(f.info("Extended bounds with Geo marker position: "+s.getPosition()),w.extend(s.getPosition())),A=w,null!=w&&r.fitBounds(w))}function t(){null!=A?r.getCenter()!=A.getCenter()&&(f.info("Panning map back to its original bounds center: "+A.getCenter()),r.fitBounds(A),r.setCenter(A.getCenter())):null!=K&&(f.info("Panning map back to its original center: "+K+" and updated zoom: "+
        O),r.setCenter(K),r.setZoom(O))}function P(d){a(d+" input#a_address").val("");a(d+" input#b_address").val("");a(d+" input#a_address").removeClass("d_error");a(d+" input#b_address").removeClass("d_error");a("input#"+m+"_avoid_hway").prop("checked",!1);a("input#"+m+"_avoid_tolls").prop("checked",!1);a("input#"+m+"_radio_km").prop("checked",!1);a("input#"+m+"_radio_miles").prop("checked",!0)}function u(d,g){var c=E(d.content,g),p="div#direction-controls-placeholder-"+m,b=a("div#rendered-directions-placeholder-"+
        m);google.maps.event.addListener(d,"click",function(){P(p);a(p).fadeOut();H.setMap(null);b.html("");b.hide();a(p+" button#print_sub").hide();z(d,c,p);x(d,c,p,b);B.setContent(c.bubbleContent);B.setOptions({disableAutoPan:"true"===M?!1:!0});B.open(r,this)})}function x(d,g,c,b){var f="div#bubble-"+g.bubbleHolderId,e=d.content,e=e.replace("Lat/Long: ",""),k=!1==(null==s?!1:!0)||null==s.getPosition()?"":s.getPosition();a(document).on("click",f+" a.dirToHereTrigger",function(){this.id==="toHere-"+g.bubbleHolderId&&
    (a(c).fadeIn(),a(c+" input#a_address").val(k),a(c+" input#b_address").val(e),"miles"===L?(a("input#"+m+"_radio_miles").prop("checked",!0),a("input#"+m+"_radio_km").prop("checked",!1)):"km"===L&&(a("input#"+m+"_radio_km").prop("checked",!0),a("input#"+m+"_radio_miles").prop("checked",!1)))});a(document).on("click",f+" a.dirFromHereTrigger",function(){this.id==="fromHere-"+g.bubbleHolderId&&(a(c).fadeIn(),a(c+" input#a_address").val(e),a(c+" input#b_address").val(k),"miles"===L?(a("input#"+m+"_radio_miles").prop("checked",
        !0),a("input#"+m+"_radio_km").prop("checked",!1)):"km"===L&&(a("input#"+m+"_radio_km").prop("checked",!0),a("input#"+m+"_radio_miles").prop("checked",!1)))});a(document).on("click",c+" div.d_close-wrapper",function(d){P(c);a(this).parent().fadeOut();H.setMap(null);b.html("");b.hide();a(c+" button#print_sub").hide();t();return!1})}function z(d,g,c){W.getPanoramaByLocation(d.position,50,function(b,e){if(e===google.maps.StreetViewStatus.OK)a(document).on("click","a#trigger-"+g.bubbleHolderId,function(){var b=
    {navigationControl:!0,enableCloseButton:!0,addressControl:!1,linksControl:!0,scrollwheel:!1,addressControlOptions:{position:google.maps.ControlPosition.BOTTOM},position:d.position,pov:{heading:165,pitch:0,zoom:1}},p=new google.maps.StreetViewPanorama(document.getElementById("bubble-"+g.bubbleHolderId),b);p.setVisible(!0);google.maps.event.addListener(B,"closeclick",function(){P(c);a(c).fadeOut();null!=p&&(p.unbind("position"),p.setVisible(!1));p=null});google.maps.event.addListener(p,"closeclick",
        function(){null!=p&&(p.unbind("position"),p.setVisible(!1),a("div#bubble-"+g.bubbleHolderId).css("background","none"));p=null})});else f.warn("There is not street view available for this marker location: "+d.position+" status: "+e),a(document).on("click","a#trigger-"+g.bubbleHolderId,function(a){a.preventDefault()}),a("a#trigger-"+g.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important"),google.maps.event.addListener(B,"domready",function(){a("a#trigger-"+g.bubbleHolderId).removeAttr("href");
        a("a#trigger-"+g.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important")})})}function C(){var d="div#direction-controls-placeholder-"+m,g=a("div#rendered-directions-placeholder-"+m);a(document).on("click",d+" a#reverse-btn",function(c){c=a(d+" input#a_address").val();var g=a(d+" input#b_address").val();a(d+" input#a_address").val(g);a(d+" input#b_address").val(c);return!1});a(document).on("click",d+" a#d_options_show",function(){a(d+" a#d_options_hide").show();a(d+
        " a#d_options_show").hide();a(d+" div#d_options").show();return!1});a(document).on("click",d+" a#d_options_hide",function(){a(d+" a#d_options_hide").hide();a(d+" a#d_options_show").show();a(d+" div#d_options").hide();a("input#"+m+"_avoid_hway").prop("checked",!1);a("input#"+m+"_avoid_tolls").prop("checked",!1);a("input#"+m+"_radio_km").prop("checked",!1);a("input#"+m+"_radio_miles").prop("checked",!0);return!1});a(document).on("click",d+" button#d_sub",function(){var c=a(d+" input#a_address").val(),
        b=a(d+" input#b_address").val(),e=!1;if(null==c||""==c)a(d+" input#a_address").addClass("d_error"),e=!0;if(null==b||""==b)a(d+" input#b_address").addClass("d_error"),e=!0;if(!e){a(d+" button#d_sub").prop("disabled",!0).html("Please wait..");var k=google.maps.DirectionsTravelMode.DRIVING;a(d+" a#dir_w_btn").hasClass("selected")&&(k=google.maps.DirectionsTravelMode.WALKING);var e=a("input#"+m+"_avoid_hway").is(":checked"),n=a("input#"+m+"_avoid_tolls").is(":checked"),h=a("input#"+m+"_radio_miles").is(":checked"),
        k={origin:c,destination:b,travelMode:k,provideRouteAlternatives:!0};e&&(k.avoidHighways=!0);n&&(k.avoidTolls=!0);k.unitSystem=h?google.maps.DirectionsUnitSystem.IMPERIAL:google.maps.DirectionsUnitSystem.METRIC;X.route(k,function(e,k){k==google.maps.DirectionsStatus.OK?(g.html(""),g.show(),H.setMap(r),H.setDirections(e),a(d+" button#d_sub").removeAttr("disabled").html("Get directions"),a(d+" button#print_sub").fadeIn(),B.close()):(f.error('Could not route directions from "'+c+'" to "'+b+'", got result from Google: '+
        k),g.html("<span style='font-size: 12px; font-weight: bold; color: red'>Could not route directions from<br />'"+c+"' to<br />'"+b+"'<br />Got result from Google: ["+k+"]</span>"),a(d+" button#print_sub").hide(),a(d+" button#d_sub").removeAttr("disabled").html("Get directions"))})}});a(document).on("click",d+" button#print_sub",function(){var c=a(d+" input#a_address").val(),g=a(d+" input#b_address").val(),b="d";a(d+" a#dir_w_btn").hasClass("selected")&&(b="w");c="http://maps.google.com/?saddr="+c+
        "&daddr="+g+"&dirflg="+b+"&pw=2";c=a("input#"+m+"_radio_miles").is(":checked")?c+"&doflg=ptm":c+"&doflg=ptk";"d"===b&&(b=a("input#"+m+"_avoid_hway").is(":checked"),g=a("input#"+m+"_avoid_tolls").is(":checked"),b&&(c+="&dirflg=h"),g&&(c+="&dirflg=t"));window.open(c);return!1});a(document).on("change focus",d+" input#a_address",function(){a(d+" input#a_address").removeClass("d_error");return!1});a(document).on("change focus",d+" input#b_address",function(){a(d+" input#b_address").removeClass("d_error");
        return!1});a(document).on("click",d+" .kd-button",function(){var g=this.id;"dir_d_btn"==g?a(d+" a#dir_d_btn").hasClass("selected")?f.warn("Driving travel mode is already selected"):(a(d+" a#dir_d_btn").addClass("selected"),a(d+" a#dir_w_btn").removeClass("selected")):"dir_w_btn"==g&&(a(d+" a#dir_w_btn").hasClass("selected")?f.warn("Walking travel mode is already selected"):(a(d+" a#dir_w_btn").addClass("selected"),a(d+" a#dir_d_btn").removeClass("selected")));return!1})}function E(a,g){var c=Math.floor(111111*
        Math.random()),c=c+"-"+m,b="<div id='bubble-"+c+"' style='height: 130px !important; width: 300px !important;' class='bubble-content'>";if(!g.geoMashup||g.geoMashup&&!g.infoBubbleContainPostLink)b+="<h4>"+CGMPGlobal.address+":</h4>",b+="<p class='custom-bubble-text'>"+a+"</p>",""!=g.customBubbleText&&(b+="<p class='custom-bubble-text'>"+g.customBubbleText+"</p>");else var e=g.postTitle.substring(0,30),b=b+""+("<p class='geo-mashup-post-title'><a title='Original post: "+g.postTitle+"' href='"+g.postLink+
        "'>"+e+"..</a></p>"),b=b+("<p class='geo-mashup-post-excerpt'>"+g.postExcerpt+"</p>");b+="<div class='custom-bubble-links-section'>";b+="<hr />";b+="<p class='custom-bubble-text'>"+CGMPGlobal.directions+": <a id='toHere-"+c+"' class='dirToHereTrigger' href='javascript:void(0);'>"+CGMPGlobal.toHere+"</a> - <a id='fromHere-"+c+"' class='dirFromHereTrigger' href='javascript:void(0);'>"+CGMPGlobal.fromHere+"</a> | <a id='trigger-"+c+"' class='streetViewTrigger' href='javascript:void(0);'>"+CGMPGlobal.streetView+
        "</a></p>";b+="</div></div>";return{bubbleHolderId:c,bubbleContent:b}}function q(a,b,c){var e={clickable:!1,cursor:"pointer",draggable:!1,flat:!0,icon:{url:CGMPGlobal.customMarkersUri+"gpsloc.png",size:new google.maps.Size(34,34),scaledSize:new google.maps.Size(17,17),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,8)},optimized:!1,position:new google.maps.LatLng(0,0),title:"Current location",zIndex:2};b&&(e=this.copyOptions_(e,b));b={clickable:!1,radius:0,strokeColor:"1bb6ff",strokeOpacity:0.4,
        fillColor:"61a0bf",fillOpacity:0.4,strokeWeight:1,zIndex:1};c&&(b=this.copyOptions_(b,c));this.marker_=new google.maps.Marker(e);this.circle_=new google.maps.Circle(b);this.map=this.position=this.accuracy=null;this.set("minimum_accuracy",null);this.set("position_options",{enableHighAccuracy:!0,maximumAge:1E3});this.circle_.bindTo("map",this.marker_);a&&this.setMap(a)}var v,F,L,T,J,S,r,I,M,A,K,O,m,U,w,B,W,H,X,s=null,V=!1,Q=!1,R=[],G=[];q.prototype=new google.maps.MVCObject;q.prototype.set=function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              b){if(/^(?:position|accuracy)$/i.test(a))throw"'"+a+"' is a read-only property.";/map/i.test(a)?this.setMap(b):google.maps.MVCObject.prototype.set.apply(this,arguments)};q.prototype.marker_=null;q.prototype.circle_=null;q.prototype.getMap=function(){return this.map};q.prototype.getPositionOptions=function(){return this.get("position_options")};q.prototype.setPositionOptions=function(a){this.set("position_options",a)};q.prototype.getPosition=function(){return this.position};q.prototype.getBounds=function(){return this.position?
        this.circle_.getBounds():null};q.prototype.getAccuracy=function(){return this.accuracy};q.prototype.getMinimumAccuracy=function(){return this.get("minimum_accuracy")};q.prototype.setMinimumAccuracy=function(a){this.set("minimum_accuracy",a)};q.prototype.watchId_=-1;q.prototype.setMap=function(a){this.map=a;this.notify("map");a?this.watchPosition_():(this.marker_.unbind("position"),this.circle_.unbind("center"),this.circle_.unbind("radius"),this.position=this.accuracy=null,navigator.geolocation.clearWatch(this.watchId_),
        this.watchId_=-1,this.marker_.setMap(a))};q.prototype.setMarkerOptions=function(a){this.marker_.setOptions(this.copyOptions_({},a))};q.prototype.setCircleOptions=function(a){this.circle_.setOptions(this.copyOptions_({},a))};q.prototype.updatePosition_=function(a){var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),c=null==this.marker_.getMap();if(c){if(null!=this.getMinimumAccuracy()&&a.coords.accuracy>this.getMinimumAccuracy())return;this.marker_.setMap(this.map);this.marker_.bindTo("position",
        this);this.circle_.bindTo("center",this,"position");this.circle_.bindTo("radius",this,"accuracy")}this.accuracy!=a.coords.accuracy&&google.maps.MVCObject.prototype.set.call(this,"accuracy",a.coords.accuracy);!c&&null!=this.position&&this.position.equals(b)||google.maps.MVCObject.prototype.set.call(this,"position",b)};q.prototype.watchPosition_=function(){var a=this;navigator.geolocation&&(this.watchId_=navigator.geolocation.watchPosition(function(b){a.updatePosition_(b)},function(b){google.maps.event.trigger(a,
        "geolocation_error",b)},this.getPositionOptions()))};q.prototype.copyOptions_=function(a,b){for(var c in b)!0!==q.DISALLOWED_OPTIONS[c]&&(a[c]=b[c]);return a};q.DISALLOWED_OPTIONS={map:!0,position:!0,radius:!0};return{init:function(a,b,c,e){G=e;r=a;m=r.getDiv().id;M=b;L=c;google.maps.event.addListener(r,"click",function(){t()});v=[];F=[];O=5;A=K=I=J=null;T=S=!1;U=new google.maps.Geocoder;w=new google.maps.LatLngBounds;B=new google.maps.InfoWindow;W=new google.maps.StreetViewService;X=new google.maps.DirectionsService;
        rendererOptions={draggable:!0};H=new google.maps.DirectionsRenderer(rendererOptions);H.setPanel(document.getElementById("rendered-directions-placeholder-"+m))},setGeoLocationIfEnabled:function(a){"true"===a&&(s=new q,google.maps.event.addListenerOnce(s,"position_changed",function(){r.setCenter(this.getPosition());r.fitBounds(this.getBounds())}),google.maps.event.addListener(s,"geolocation_error",function(a){alert("There was an error creating Geolocation marker: "+a.message+"\n\nProceeding with normal map generation..");
        f.error("There was an error obtaining your position. Message: "+a.message);s=null}),s.setPositionOptions({enableHighAccuracy:!0,timeout:6E3,maximumAge:0}),s.setMap(r))},buildAddressMarkers:function(a,g,c){T=!0;I=y.trim(a);I=y.searchReplace(I,"'","");"true"===g?(V=!0,a=N(I),"true"===c?e(a,!0):"false"===c&&e(a,!1)):null!=g&&"false"!==g||b(I,"","","",!1,!1);l();k()},isBuildAddressMarkersCalled:function(){return T}}},y=function(){return{isNumeric:function(a){return/^([0-9?(\-.,;\s{1,})]+)$/.test(a)},
        isAlphaNumeric:function(a){return/^([a-zA-Z0-9?(/\-.,\s{1,})]+)$/.test(a)},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},searchReplace:function(a,f,e){return a.replace(RegExp(f,"g"),e)}}}(),f=function(){var a=function(a){navigator.userAgent.match(/msie|trident/i)||console.log(a)};return{info:function(f){a("Info :: "+f)},raw:function(f){a(f)},warn:function(f){a("Warning :: "+f)},error:function(f){a("Error :: "+f)},fatal:function(f){a("Fatal :: "+f)}}}(),E=function(){return{alertError:function(f){function l(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             e){b.preventDefault();var f=a(e).closest("div.cgmp-popup-shortcode-dialog");f&&a(f).remove();0==a("div.cgmp-popup-shortcode-dialog").length&&a("#cgmp-popup-mask").remove()}var e=a('<div id="cgmp-popup-mask"/>'),b=Math.random().toString(36).substring(3),h=a('<div id="'+b+'" class="cgmp-popup-shortcode-dialog cgmp-popup-window">');h.html("<div class='dismiss-container'><a class='dialog-dismiss' href='javascript:void(0)'>x</a></div><p style='text-align: left; padding: 10px 10px 0 10px'>"+f+"</p><div align='center'><input type='button' class='close-dialog' value='Close' /></div>");
        a("body").append(e);a("body").append(h);f=a(document).height();e=a(window).width();a("#cgmp-popup-mask").css({width:e,height:f,opacity:0.1});1==a("#cgmp-popup-mask").length&&a("#cgmp-popup-mask").show();f=a(window).height();e=a(window).width();a("div#"+b).css("top",f/2-a("div#"+b).height()/2);a("div#"+b).css("left",e/2-a("div#"+b).width()/2);a("div#"+b).fadeIn(500);a(".cgmp-popup-window .close-dialog").click(function(b){l(b,a(this))});a(".cgmp-popup-window .dialog-dismiss").click(function(b){l(b,
            a(this))});a("#cgmp-popup-mask").click(function(){a(this).remove();a(".cgmp-popup-window").remove()});a(window).resize(function(){var b=a(".window"),e=a(document).height(),f=a(window).width();a("#cgmp-popup-mask").css({width:f,height:e});e=a(window).height();f=a(window).width();b.css("top",e/2-b.height()/2);b.css("left",f/2-b.width()/2)})}}}(),u=document.head||document.getElementsByTagName("head")[0]||document.documentElement,t=document.createElement("link");t.type="text/css";t.rel="stylesheet";t.href=
    CGMPGlobal.cssHref;t.media="screen";u.appendChild(t);u=parseFloat(a.fn.jquery.split(".")[0]);t=parseFloat(a.fn.jquery.split(".")[1]);(1>u||1<=u&&2>u&&9>t)&&f.fatal("Client uses jQuery older than the version 1.9.0, check if he is using jQuery Migrate plugin");if("undefined"===typeof google||!google)return E.alertError(CGMPGlobal.msgNoGoogle),f.fatal("We do not have reference to Google API. Aborting map generation .."),!1;if("undefined"!==typeof GMap2&&GMap2)return E.alertError(CGMPGlobal.msgApiV2),
    f.fatal("It looks like the webpage has reference to GMap2 object from Google API v2. Aborting map generation .."),!1;google.load("maps","3",{other_params:"sensor=false&libraries=panoramio&language="+CGMPGlobal.language,callback:function(){l()}})})("undefined"!==typeof l&&null!=l&&l?l:jQuery)}if("undefined"===typeof jQuery||null==jQuery){var M=!1,x=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=document.createElement("script");l.type="text/javascript";l.src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";
    l.onload=l.onreadystatechange=function(){if(!M&&(!this.readyState||/loaded|complete/.test(l.readyState))){M=!0;var Y=jQuery.noConflict();C(Y);l.onload=l.onreadystatechange=null;x&&l.parentNode&&x.removeChild(l);l=void 0}};x.appendChild(l)}else C()})();